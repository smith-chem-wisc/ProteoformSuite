<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: External Code using OpenMS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a16249.html">Building %OpenMS on Windows</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">External Code using <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>If OpenMS' TOPP and UTILS tools are not enough in a certain scenario, you can either request a change to OpenMS, if you feel this functionality is useful for others as well, or modify/extend OpenMS privately. For the latter, there are multiple ways to do this: You can modify the developer version of OpenMS by changing existing tools or adding new ones. Or you use an <b>External Project</b> to write a new tool, while not touching OpenMS itself (see below on how to do that). Once you've finished your new tool, and it only needs to run on the development machine, you're done. If you want to ship it to a new client machine, see <a class="el" href="a16234.html#development_external_ship">Shipping your external code to a new machine</a> .</p>
<h1><a class="anchor" id="development_external"></a>
Compiling external code</h1>
<p>It is very easy to set up an environment to write your own programs using OpenMS. Make sure you downloaded and installed the source package of OpenMS/TOPP properly. Note that you cannot use the 'install' target when working with the development version of OpenMS - it must be built and used within the build tree. <br  />
 <br  />
</p>
<p>All important compiler settings and preprocessor definitions along with the OpenMS library will be available to you. The most important variables are: </p><ul>
<li>
OpenMS_INCLUDE_DIRECTORIES - all include directories containing OpenMS headers </li>
<li>
OPENMS_ADDCXX_FLAGS - preprocessor macros we require written as (-DMACRO1 -DMACRO2) etc </li>
</ul>
<p>and the OpenMS target itself (which you can link against). <br  />
 The example that follows will be explained in details:</p>
<div class="fragment"><div class="line"><span class="preprocessor">### example CMakeLists.txt to develop C++ programs using OpenMS</span></div>
<div class="line">project(<span class="stringliteral">&quot;Example_Project_using_OpenMS&quot;</span>)</div>
<div class="line">cmake_minimum_required(VERSION 2.8.3)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">## list all your executables here (a corresponding .cpp file should exist, e.g. Main.cpp)</span></div>
<div class="line">set(my_executables</div>
<div class="line">  Main</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">## list all classes here, which are required by your executables</span></div>
<div class="line"><span class="preprocessor">## (all these classes will be linked into a library)</span></div>
<div class="line">set(my_sources</div>
<div class="line">  ExampleLibraryFile.cpp</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">## find OpenMS configuration and register target &quot;OpenMS&quot; (our library)</span></div>
<div class="line">find_package(<a class="code" href="a05822.html">OpenMS</a>)</div>
<div class="line"><span class="preprocessor">## if the above fails you can try calling cmake with -D OpenMS_DIR=/path/to/OpenMS/</span></div>
<div class="line"><span class="preprocessor">## or modify the find_package() call accordingly</span></div>
<div class="line"><span class="preprocessor">## find_package(OpenMS PATHS &quot;&lt;/path/to/OpenMS//&quot;)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># check whether the OpenMS package was found</span></div>
<div class="line"><span class="keywordflow">if</span> (OpenMS_FOUND)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">  # check if the variable containing the include directories is defined</span></div>
<div class="line">  <span class="keywordflow">if</span>(NOT OpenMS_INCLUDE_DIRECTORIES)</div>
<div class="line">    set(_message <span class="stringliteral">&quot;The variable \${OpenMS_INCLUDE_DIRECTORIES} is not defined.&quot;</span>)</div>
<div class="line">    set(_message <span class="stringliteral">&quot;${_message}This CMakeLists.txt and your build of OpenMS seem incompatible.&quot;</span>)</div>
<div class="line">    set(_message <span class="stringliteral">&quot;${_message}Please use the latest version from the OpenMS release!&quot;</span>)</div>
<div class="line">    message(FATAL_ERROR ${_message})</div>
<div class="line">  endif()</div>
<div class="line"> </div>
<div class="line">  <span class="preprocessor">## include directories for OpenMS headers (and contrib)</span></div>
<div class="line"><span class="preprocessor">  # Note: If you want to link against a specific library contained</span></div>
<div class="line"><span class="preprocessor">  #       in the OpenMS package you should also list the</span></div>
<div class="line"><span class="preprocessor">  #       corresponding include variable here, e.g.,</span></div>
<div class="line"><span class="preprocessor">  #       OpenMS_GUI -&gt; ${OpenMS_GUI_INCLUDE_DIRECTORIES}</span></div>
<div class="line">  include_directories(${OpenMS_INCLUDE_DIRECTORIES})</div>
<div class="line"> </div>
<div class="line">  ## <a class="code" href="a05838.html#a75568494d876bb85e8710170c07d0bee">append</a> precompiler macros and compiler flags specific to <a class="code" href="a05822.html">OpenMS</a></div>
<div class="line">  ## Warning: <span class="keyword">this</span> could be harmful to your project. Check <span class="keyword">this</span> <span class="keywordflow">if</span> problems occur.</div>
<div class="line">  ## Also, use <span class="keyword">this</span> to add your own compiler flags, e.g. <span class="keywordflow">for</span> OpenMP support.</div>
<div class="line">  ## e.g. <span class="keywordflow">for</span> Visual Studio use /openmp</div>
<div class="line">  set(CMAKE_CXX_FLAGS <span class="stringliteral">&quot;${CMAKE_CXX_FLAGS} ${OPENMS_ADDCXX_FLAGS}&quot;</span>)</div>
<div class="line"><span class="preprocessor">  # set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} ${OPENMS_ADDCXX_FLAGS} /openmp&quot;)</span></div>
<div class="line">  </div>
<div class="line">  add_definitions(/DBOOST_ALL_NO_LIB) <span class="preprocessor">## disable auto-linking of boost libs (Boost tends to guess wrong lib names)</span></div>
<div class="line">  </div>
<div class="line"><span class="preprocessor">  ## library with additional classes from above</span></div>
<div class="line">  add_library(my_custom_lib STATIC ${my_sources})</div>
<div class="line"> </div>
<div class="line">  ## add targets <span class="keywordflow">for</span> the executables</div>
<div class="line">  <span class="keywordflow">foreach</span>(i ${my_executables})</div>
<div class="line">    add_executable(${i} ${i}.cpp)</div>
<div class="line">    ## link executables against <a class="code" href="a05822.html">OpenMS</a></div>
<div class="line">    target_link_libraries(${i} <a class="code" href="a05822.html">OpenMS</a> my_custom_lib)</div>
<div class="line">  endforeach(i)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">else</span>(OpenMS_FOUND)</div>
<div class="line">  message(FATAL_ERROR <span class="stringliteral">&quot;OpenMSConfig.cmake file not found!&quot;</span>)</div>
<div class="line">endif(OpenMS_FOUND)</div>
</div><!-- fragment --><p>The command <em>project</em> defines the name of the project - the name is only of interest of you're working in an IDE or want to export this project's targets. To compile your program just append it to the <em>my_executables</em> list. If you also use object files (classes which do not contain a main program), append them to the <em>my_sources</em> list. In the next step CMake creates a statically linked library of the object files, listed in <em>my_sources</em>. This simple CMakeLists.txt example can be extended to also build shared libraries, include other external libraries and so on.</p>
<p>An example external project can be found in <em>OpenMS/share/OpenMS/examples/external_code</em>. Copy these files to a separate directory and use CMake to configure it (here as an in-source build). </p><div class="fragment"><div class="line">cd &lt;path_to_external_project&gt;</div>
<div class="line">cmake -G <span class="stringliteral">&quot;&lt;generator&gt;&quot;</span> .</div>
</div><!-- fragment --><p>For more information visit the website of cmake at cmake.org and consult the documentation. <br  />
 <b>Have fun coding with OpenMS!</b></p>
<h1><a class="anchor" id="development_external_ship"></a>
Shipping your external code to a new machine</h1>
<p>If you've modified OpenMS itself and not used an external project you can just use our installer scripts, to build your own OpenMS installer for your platform (see our internal FAQ which is built using "make doc_internal") and ship that to a client machine.</p>
<p>If you've used an external project and have a new executable (+ an optional new library), you can use the installer approach as well, and manually copy the new executable to the TOPP/UTILS binary directory (e.g. on Windows this could be <em>c:/program</em> files/OpenMS/bin, on Linux it could be <em>/bin</em>.</p>
<p>If you do NOT use the installer, you can copy all required files manually, plus a few extra steps - see below. What needs to be done is a little platform dependent, thus very cumbersome to explain. You should look at the cmake installer scripts, to see whats required (for Mac and Linux see <em>OpenMS/cmake/package*</em>.cmake, for Windows see <em><a href="https://github.com/OpenMS/windows-installer/OpenMS_installer.nsi">https://github.com/OpenMS/windows-installer/OpenMS_installer.nsi</a></em> ). <br  />
 In short: </p><ul>
<li>
copy the OpenMS/share/OpenMS directory to the client machine (e.g. &lt;client/my_dir&gt;/share) and set the environment variable <em>OPENMS_DATA_PATH</em> to this directory </li>
<li>
copy the OpenMS library (OpenMS.dll for Windows or OpenMS.so/.dylib for Linux/Mac) to &lt;client/my_dir&gt;/bin </li>
<li>
copy all Qt4 libraries to the client &lt;client/my_dir&gt;/bin or on Linux/Mac make sure you have installed the Qt4 package </li>
<li>
[Windows only] copy Xerces dll (see contrib/lib) to &lt;client/my_dir&gt;/bin </li>
<li>
[Windows only] install the VS redistributable package (see Microsoft Homepage) on the client machine which corresponds to the VS version that was used to compile your code (use the correct redistributable package! , i.e. architecture 32|64bit, VS version, VS Service Pack version). If you choose the wrong redistributable package, you will get "Application failed to initialize properly..." error messages. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aa05838_html_a75568494d876bb85e8710170c07d0bee"><div class="ttname"><a href="a05838.html#a75568494d876bb85e8710170c07d0bee">OpenMS::StringConversions::append</a></div><div class="ttdeci">void append(const T &amp;i, String &amp;target)</div><div class="ttdef"><b>Definition:</b> StringUtils.h:77</div></div>
<div class="ttc" id="aa05822_html"><div class="ttname"><a href="a05822.html">OpenMS</a></div><div class="ttdoc">Main OpenMS namespace.</div><div class="ttdef"><b>Definition:</b> FeatureDeconvolution.h:46</div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:25 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
