<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: Building OpenMS on Mac OS X</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Building OpenMS on Mac OS X </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="install_mac_read"></a>
Introduction</h1>
<p>This document explains the installation procedure for building OpenMS from its sources. If you only want to use the OpenMS Proteomics Pipeline (TOPP), you are strongly encouraged to <b>download the binary installer</b> (see <a href="http://www.OpenMS.de" target="_blank">here</a>), instead of building OpenMS from sources. Be aware though that we do not provide binary installers for every MacOS version. For more information read the install instructions for the TOPP binaries.</p>
<p>This document especially considers the installation of several libraries that are required by OpenMS. Most of these libraries are made available in our "contrib-package" (see below). <br  />
 If you encounter errors during configuring/compiling our software, have a look at our <a class="el" href="a16236.html">Known Issues</a> section, maybe the error is already known. If not, please write to the mailing list (open-ms-general AT lists.sourceforge.net) or report the error on our <a href="https://github.com/OpenMS/OpenMS/issues">issue tracker</a>.</p>
<h2><a class="anchor" id="hint_package_manager"></a>
Package Managers</h2>
<p>We suggest to use <a href="https://brew.sh/" target="_new">Homebrew</a> to install most of the requirements for OpenMS to ease the process of upgrading those dependencies.</p>
<h2><a class="anchor" id="required_apps"></a>
Required applications</h2>
<p>In order to compile OpenMS, several applications need to be installed: </p><ul>
<li>
We only support building <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> via the standard Appleclang compiler (GCC can be tried at your own risk) and compilation is tested only on the two or three most recent macOS versions. Minimal installation is achieved by downloading Apple's "Command Line Tools", however we suggest installing a full Xcode (the current version can be obtained from the Mac App Store; required is version 4.2 or greater). More details can be found on the <a href="https://developer.apple.com/xcode/" target="_new" title="Xcode Downloads and Resources.">Apple Developer Site</a>. <dl class="section note"><dt>Note</dt><dd>Since macOS El Capitan 10.11, the "Command Line Tools" can easily be installed via: <div class="fragment"><div class="line">xcode-select --install</div>
</div><!-- fragment --> </dd></dl>
</li>
<li>
CMake (version 3.1 or higher) is required to configure and build the OpenMS as well as some of its dependencies. </li>
<li>
Qt5, its SVG module and the header files are required. <dl class="section note"><dt>Note</dt><dd>We recommend installing Qt using Homebrew with: <div class="fragment"><div class="line">brew install qt5</div>
</div><!-- fragment --> </dd></dl>
</li>
<li>
Building pyOpenMS, the Python bindings for OpenMS, requires Python, Cython and a few Python packages. See <a class="el" href="a16238.html">here</a> for more detailed pyOpenMS build instructions.  </li>
</ul>
<p>If your OpenMS version is a development version obtained via Git, the following applications are needed in order to create the OpenMS documentation:</p>
<ul>
<li>
<a href="http://www.doxygen.org/index.html">Doxygen</a> (recommended: &gt;= 1.8.13, required: &gt; 1.7.1, some might be buggy in between) is used to generate the OpenMS documentation. </li>
<li>
pdflatex is required to generate the tutorial PDFs. The latest MacTeX release can be downloaded <a href="http://tug.org/mactex/">here</a> </li>
</ul>
<hr  />
 <h1><a class="anchor" id="install_mac_contrib"></a>
Installing the contrib package</h1>
<p>In order to facilitate the installation of the libraries required for OpenMS, we provide a "contrib-package" containing the libraries Boost, Eigen, WildMagic, libSVM, libHDF5, SeqAn, glpk, zlib, bzip2, CoinMP and Xerces-C.</p>
<p>The contrib package is contained in the OpenMS release package and is available inside the <code>contrib</code> directory in the OpenMS directory.</p>
<p>If you are using the developer version of OpenMS via </p><div class="fragment"><div class="line">cd ~</div>
<div class="line">mkdir openms-development</div>
<div class="line">cd openms-development</div>
<div class="line">git clone https:<span class="comment">//github.com/OpenMS/OpenMS</span></div>
</div><!-- fragment --><p> you have to checkout the empty folder by calling the following command: </p><div class="fragment"><div class="line">cd <a class="code" href="a05822.html">OpenMS</a></div>
<div class="line">git submodule update --init contrib</div>
</div><!-- fragment --><p>CMake is used to check your system and build the contrib libraries.</p>
<dl class="section note"><dt>Note</dt><dd>To avoid problems while building the libraries contained in the contrib package, the path to your contrib directory should not contain any spaces.</dd></dl>
<ol>
<li>
Open a Terminal (<code>/Applications/Utilities/Terminal.app</code>) </li>
<li>
Create a build directory for the OpenMS contrib e.g., <div class="fragment"><div class="line">mkdir ~/openms-development/contrib_build</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Enter the created directory and call <code>cmake</code> to build the contrib</p>
<div class="fragment"><div class="line">cd &lt;path_to_contrib_build&gt;</div>
<div class="line">cmake -DBUILD_TYPE=ALL -DNUMBER_OF_JOBS=4 -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_C_COMPILER=clang &lt;path_to_OpenMS_contrib&gt;</div>
</div><!-- fragment --><p class="interli">Example:</p>
<div class="fragment"><div class="line">cd ~/openms-development/contrib_build</div>
<div class="line">cmake -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_C_COMPILER=clang ~/openms-development/<a class="code" href="a05822.html">OpenMS</a>/contrib</div>
</div><!-- fragment -->  </li>
</ol>
<p>If everything worked, the following sub-directories were created under the contrib build directory:</p>
<ul>
<li>
<code>lib/</code> containing the libraries needed by OpenMS. </li>
<li>
<code>include/</code> containing the header files needed for OpenMS. </li>
</ul>
<h2><a class="anchor" id="using_system_libs"></a>
Using system libraries</h2>
<p>As an alternative to the contrib libraries shipped with OpenMS you can also use libraries installed via your package manager (Homebrew or MacPorts).</p>
<p>For Homebrew the following sequence of commands installs most of the libraries required by OpenMS.</p>
<div class="fragment"><div class="line">brew install libsvm xerces-<a class="code" href="a05830.html#a8fc6defe4e499b1b9b9c275689e44352">c</a> boost glpk eigen sqlite hdf5</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Until the CoinMP complete package is migrated to the coin-or-tools tap, we suggest to use our contrib version. </dd>
<dd>
The compression libraries bzip and zlib should come with your macOS/XCode/commandline tools.</dd></dl>
<p>For MacPorts the following sequence of commands installs some of the libraries required by OpenMS.</p>
<div class="fragment"><div class="line">sudo port install libsvm xercesc3 boost glpk eigen3 sqlite hdf5</div>
</div><!-- fragment --><p>The rest needs to be installed via the contrib.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># assuming you cloned OpenMS to ~/openms-development/OpenMS</span></div>
<div class="line">cd ~/openms-development/<a class="code" href="a05822.html">OpenMS</a></div>
<div class="line">git submodule update --init contrib</div>
<div class="line">mkdir ../contrib-build</div>
<div class="line">cd ../contrib-build</div>
<div class="line">cmake -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_C_COMPILER=clang -DBUILD_TYPE=SEQAN ~/openms-development/<a class="code" href="a05822.html">OpenMS</a>/contrib</div>
<div class="line">cmake -DBUILD_TYPE=COINOR .</div>
<div class="line">cmake -DBUILD_TYPE=WILDMAGIC .</div>
</div><!-- fragment --><hr  />
<dl class="section note"><dt>Note</dt><dd>Some thirdparty software used via adapter tools in OpenMS might also require an installed Java Runtime (brew cask install java).</dd></dl>
<h1><a class="anchor" id="install_mac_openms"></a>
Installing OpenMS</h1>
<p>Assuming you have successfully cloned <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> and installed the required libraries, you can now build <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a>. Therefore execute the following steps:</p>
<ol>
<li>
Open a Terminal (<code>/Applications/Utilities/Terminal.app</code>) </li>
<li>
<p class="startli">Create a build directory for OpenMS, e.g., </p><div class="fragment"><div class="line">mkdir ~/openms-development/openms_build</div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
<p class="startli">Call <code>cmake</code> to create the build system there</p>
<div class="fragment"><div class="line">cd &lt;path_to_OpenMS_build&gt;</div>
<div class="line">cmake -DOPENMS_CONTRIB_LIBS=&lt;path_to_contrib_build&gt; -<a class="code" href="a02627.html#a645302863648b762cbb5b085eb4fd8c4">DCMAKE_PREFIX_PATH</a>=<span class="stringliteral">&quot;$(brew --prefix);$(brew --prefix qt5)&quot;</span> &lt;path_to_OpenMS&gt;</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>If you still have Qt4 installed make sure to brew uninstall or at least brew unlink it, so it is not picked up. The same holds for libraries that you built and passed with the contrib. You can set additional CMake variables using the <code>-DVARIABLE=VALUE</code> option. A full list of the CMake variables is shown when you execute</dd></dl>
<div class="fragment"><div class="line">ccmake ~/openms-development/openms_build</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>General cmake variables can be found in the CMake help. Not all of them can be overwritten. </dd>
<dd>
You need to execute <code>cmake</code> at least once before <code>ccmake</code> can be used.  </dd></dl>
</li>
</ol>
<p>You can set more CMake variables adding <code>-DVARIABLE=VALUE</code> options when calling CMake.The most important CMake variables are:<table style="border-style:solid; border-collapse:collapse; border-color:#c0c0c0;">
<tr>
<td valign="top"><code>OPENMS_CONTRIB_LIBS</code>  </td><td>Separate search path for the contrib libraries from github.com/OpenMS/contrib that is internally considered before CMAKE_PREFIX_PATH for searching, linking and adding include directories.  </td></tr>
<tr>
<td valign="top"><code>CMAKE_PREFIX_PATH</code>  </td><td><p class="starttd">Additional search path for the contrib libraries.</p>
<p class="intertd">[MacOSX only] If you want to use libraries installed via Homebrew or MacPorts you might need to provide the corresponding paths</p>
<p class="intertd"><code>-DCMAKE_PREFIX_PATH=/usr/local/Cellar</code> for Homebrew <code>-DCMAKE_PREFIX_PATH=/opt/local</code> for MacPorts</p>
<p class="endtd">Please keep in mind that both Homebrew and MacPorts do not provide all libraries so you also need to specify the path to your self-build contrib via -DOPENMS_CONTRIB_LIBS   </p>
</td></tr>
<tr>
<td valign="top"><code>Qt5_DIR</code>  </td><td>Additional search path for the Qt5 CMake files. Use <code>/PATH/TO/QT_INSTALLATION/lib/cmake/Qt5</code> as value. &lt;\tr&gt; </td></tr>
<tr>
<td valign="top"><code>HAS_XSERVER=On/Off</code>  </td><td>[Linux/MacOS only] Defines if a running X Server is available when building OpenMS. As building parts of the documentation and running certain tests requires a running X Server, this flag can be used to disable those parts of the documentation and the tests that need an X Server. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ADDRESS_SANITIZER=On/Off</code>  </td><td>[g++/clang only] Enables/Disables Address Sanitizer (ASAN) to find access violations and other bugs.  </td></tr>
<tr>
<td valign="top"><code>WITH_GUI=On/Off</code>  </td><td>Defines if the OpenMS GUI tools (TOPPView, TOPPAS) should be built or not. If you plan to use OpenMS without a GUI, set this flag to "Off" (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ENABLE_TUTORIALS=On/Off</code>  </td><td>Enables targets to build and install the pdf tutorials (needs LaTeX). (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ENABLE_DOCS=On/Off</code>  </td><td>Enables documentation targets, allowing to build the OpenMS documentation. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>GIT_TRACKING=On/Off</code>  </td><td>Embed Git checksum into the library. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ENABLE_UPDATE_CHECK=On/Off</code>  </td><td>Check online for <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> Updates upon invocation of any TOPP/UTIL. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>CMAKE_BUILD_TYPE</code>  </td><td>[makefiles only; does not apply for XCode or VS] Should be either 'Release' (optimization enabled) or 'Debug' (debug info and precondition/postcondition checks enabled). <br  />
 The default is 'Release'.  </td></tr>
<tr>
<td valign="top"><code>CMAKE_CXX_COMPILER</code>  </td><td>Defines the C++ compiler to use.  </td></tr>
<tr>
<td valign="top"><code>MY_CXX_FLAGS</code>  </td><td>Additional custom C++ compile options you would like to add (must fit your chosen compiler). This might be useful, for example, for adding debug symbols to a Release build, or for performance analysis (e.g. for '... -DMY_CXX_FLAGS="-g;-fno-omit-frame-pointer" ...')  </td></tr>
<tr>
<td valign="top"><code>CMAKE_C_COMPILER</code>  </td><td>Defines the C compiler to use. This should match the C++ compiler. Mixing compilers (e.g., <em>clang++</em> for C++ and <em>gcc</em> for C) can lead to undefined behaviour as some internal settings (e.g., OpenMP support) are determined using the C compiler and are assumed to be the same for the C++ compiler.  </td></tr>
<tr>
<td valign="top"><code>SEARCH_ENGINES_DIRECTORY</code> (optional) </td><td>The location where thirdparty search engines (X!Tandem, OMSSA, MyriMatch, MSGF+, Fido) are located. This directory should have the same structure as the example in the search engine repository at <a href="https://github.com/OpenMS/THIRDPARTY">https://github.com/OpenMS/THIRDPARTY</a> after flattening for your platform. /. This directory is only needed to include thirdparty tools in the installer for OpenMS.  </td></tr>
<tr>
<td valign="top"><code>PYOPENMS</code>  </td><td>Use ON to enable the target for Python bindings, see also <a class="el" href="a16238.html">pyOpenMS (Python bindings)</a>.  </td></tr>
<tr>
<td valign="top"><code>CMAKE_INSTALL_PREFIX</code>  </td><td><p class="starttd">the path where the bin/ and lib/ directories should be installed to (when </p><pre>sudo make install</pre><p> is wished for a system-wide install: e.g. -DCMAKE_INSTALL_PREFIX=/usr/local/) <br  />
 <b>Note:</b> Moving these directories after installing is not supported.</p>
<p class="endtd"><b>For development, install prefixes are not supported. In this case OpenMS must be built in place!</b>   </p>
</td></tr>
</table>
</p>
<p>After CMake was executed, you can list the make targets by calling:</p>
<div class="fragment"><div class="line">make targets</div>
</div><!-- fragment --><p>In order to build the OpenMS library, the TOPP tools, tests and this documentation execute the following command:</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>The TOPP tools should now be ready to use. The executables are located in the <code>bin</code> folder of the build directory. Add this folder to your <b><code>PATH</code></b> variable for easy access. </p><dl class="section note"><dt>Note</dt><dd>When you intend to use thirdparty search- or inference engines like XTandem or Fido, their binaries also need to be in the <b><code>PATH</code></b>. Build them or download them inside the <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> source folder with <div class="fragment"><div class="line">git submodule update --init THIRDPARTY</div>
</div><!-- fragment --> and adapt the following for every thirdparty tool you want to use (shown for XTandem): <div class="fragment"><div class="line">export PATH=${PATH_TO_CLONED_OPENMS}/THIRDPARTY/${YOUR_OS}/${YOUR_ARCH}/XTandem:${PATH}</div>
</div><!-- fragment --> If you want to enable the corresponding tests in CMake, this has to happen before you configure and build the project.</dd></dl>
<hr  />
 <h1><a class="anchor" id="install_mac_testing_openms"></a>
Testing your OpenMS/TOPP installation</h1>
<p>After you have installed OpenMS and TOPP, you should test your installation by executing the following command:</p>
<div class="fragment"><div class="line">make <a class="code" href="a05829.html#a69f942d7289d5ed2ffe3a00b12235d04">test</a></div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">ctest</div>
</div><!-- fragment --><p>Using <code>ctest</code> you can also execute only a subset of tests by using the -R [SUBSTRING] option and run tests in parallel using the -j parameter. For example,</p>
<div class="fragment"><div class="line">ctest -<a class="code" href="a05830.html#a0877420f3d7b1f47b871d2ccb47168d8">R</a> TOPP_ -j 4</div>
</div><!-- fragment --><p>will run all TOPP test using 4 jobs.</p>
<p>For more information, consult ctest <a href="http://manpages.ubuntu.com/manpages/hardy/man1/ctest.1.html" target="_new">man page</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aa05830_html_a8fc6defe4e499b1b9b9c275689e44352"><div class="ttname"><a href="a05830.html#a8fc6defe4e499b1b9b9c275689e44352">OpenMS::Constants::c</a></div><div class="ttdeci">const double c</div></div>
<div class="ttc" id="aa02627_html_a645302863648b762cbb5b085eb4fd8c4"><div class="ttname"><a href="a02627.html#a645302863648b762cbb5b085eb4fd8c4">DCMAKE_PREFIX_PATH</a></div><div class="ttdeci">You can set more CMake variables adding&lt; code &gt; linking and adding include directories&lt;/td &gt;&lt;/tr &gt;&lt; tr &gt;&lt; td valign=&quot;top&quot;&gt; c CMAKE_PREFIX_PATH&lt;/td &gt;&lt; td &gt; Additional search path for the contrib libraries[MacOSX only] If you want to use libraries installed via Homebrew or MacPorts you might need to provide the corresponding paths&lt; code &gt; DCMAKE_PREFIX_PATH</div><div class="ttdef"><b>Definition:</b> common-cmake-parameters.doxygen:19</div></div>
<div class="ttc" id="aa05829_html_a69f942d7289d5ed2ffe3a00b12235d04"><div class="ttname"><a href="a05829.html#a69f942d7289d5ed2ffe3a00b12235d04">OpenMS::Internal::ClassTest::test</a></div><div class="ttdeci">bool test</div><div class="ttdoc">Status of the current subsection.</div></div>
<div class="ttc" id="aa05822_html"><div class="ttname"><a href="a05822.html">OpenMS</a></div><div class="ttdoc">Main OpenMS namespace.</div><div class="ttdef"><b>Definition:</b> FeatureDeconvolution.h:46</div></div>
<div class="ttc" id="aa05830_html_a0877420f3d7b1f47b871d2ccb47168d8"><div class="ttname"><a href="a05830.html#a0877420f3d7b1f47b871d2ccb47168d8">OpenMS::Constants::R</a></div><div class="ttdeci">const double R</div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:27 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
