<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: OpenSwathConfidenceScoring</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a16239.html">User Quickstart Guide</a></li><li class="navelem"><a class="el" href="a16240.html">TOPP documentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OpenSwathConfidenceScoring </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Computes confidence scores for <a class="el" href="a05820.html">OpenSwath</a> results.</p>
<center> <table class="doxtable">
<tr>
<td align="center" bgcolor="#EBEBEB">potential predecessor tools  </td><td valign="middle" rowspan="2"><img class="formulaInl" alt="$ \longrightarrow $" src="form_34.png"/> OpenSwathConfidenceScoring <img class="formulaInl" alt="$ \longrightarrow $" src="form_34.png"/> </td><td align="center" bgcolor="#EBEBEB">potential successor tools   </td></tr>
<tr>
<td valign="middle" align="center" rowspan="1"><a class="el" href="a16320.html">OpenSwathAnalyzer</a>  </td><td valign="middle" align="center" rowspan="1"><a class="el" href="a16325.html">OpenSwathFeatureXMLToTSV</a>   </td></tr>
</table>
</center><p>This is an implementation of the SRM scoring algorithm described in:</p>
<p>Malmstroem, L.; Malmstroem, J.; Selevsek, N.; Rosenberger, G. &amp; Aebersold, R.:<br  />
<a href="https://doi.org/10.1021/pr200844d">Automated workflow for large-scale selected reaction monitoring experiments.</a><br  />
J. Proteome Res., 2012, 11, 1644-1653</p>
<p>It has been adapted for the scoring of <a class="el" href="a05820.html">OpenSwath</a> results.</p>
<p>The algorithm compares SRM/MRM features (peak groups) to assays and computes scores for the agreements. Every feature is compared not only to the "true" assay that was used to acquire the corresponding ion chromatograms, but also to a number (parameter <code>decoys</code>) of unrelated - but real - assays selected at random from the assay library (parameter <code>lib</code>). This serves to establish a background distribution of scores, against which the significance of the "true" score can be evaluated. The final confidence value of a feature is the local false discovery rate (FDR), calculated as the fraction of decoy assays that score higher than the "true" assay against the feature. In the output feature map, every feature is annotated with its local FDR in the meta value "local_FDR" (a "userParam" element in the featureXML), and its overall quality is set to "1 - local_FDR".</p>
<p>The agreement of a feature and an assay is assessed based on the difference in retention time (RT) and on the deviation of relative transition intensities. The score <em>S</em> is computed using a binomial generalized linear model (GLM) of the form:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ S = \frac{1}{1 + \exp(-(a + b \cdot \Delta_{RT}^2 + c \cdot d_{int}))} \]" src="form_94.png"/>
</p>
<p>The meanings of the model terms are as follows:</p>
<p><img class="formulaInl" alt="$ \Delta_{RT} $" src="form_95.png"/>: Observed retention times are first mapped to the scale of the assays (parameter <code>trafo</code>), then all RTs are scaled to the range 0 to 100 (based on the lowest/highest RT in the assay library). <img class="formulaInl" alt="$ \Delta_{RT} $" src="form_95.png"/> is the absolute difference of the scaled RTs; note that this is squared in the scoring model.</p>
<p><img class="formulaInl" alt="$ d_{int} $" src="form_96.png"/>: To compute the intensity distance, the <em>n</em> (advanced parameter <code>transitions</code>) most intensive transitions of the feature are selected. For comparing against the "true" assay, the same transitions are considered; otherwise, the same number of most intensive transitions from the decoy assay. Transition intensities are scaled to a total of 1 per feature/assay and are ordered by the product (Q3) m/z value. Then the Manhattan distance of the intensity vectors is calculated (Malmstroem et al. used the RMSD instead, which has been replaced here to be independent of the number of transitions).</p>
<p><img class="formulaInl" alt="$ a, b, c $" src="form_97.png"/>: Model coefficients, stored in the advanced parameters <code>GLM:intercept</code>, <code>GLM:delta_rt</code>, and <code>GLM:dist_int</code>. The default values were estimated based on the training dataset used in the Malmstroem et al. study, reprocessed with the <a class="el" href="a05820.html">OpenSwath</a> pipeline.</p>
<p>In addition to the local FDRs, the scores of features against their "true" assays are recorded in the output - in the meta value "GLM_score" of the respective feature.</p>
<p><b>The command line parameters of this tool are:</b> </p><pre class="fragment">

OpenSwathConfidenceScoring -- Compute confidence scores for OpenSwath results

Full documentation: http://www.openms.de/documentation/TOPP_OpenSwathConfidenceScoring.html

Version: 2.4.0-HEAD-2019-12-09 Dec  9 2019, 13:47:09, Revision: af8a11e

To cite OpenMS:

  Rost HL, Sachsenberg T, Aiche S, Bielow C et al.. OpenMS: a flexible open-source software platform for mass spectrometry data analysis. Nat Meth. 2016; 13, 9: 741-748. doi:10.1038/nmeth.3959.



Usage:

  OpenSwathConfidenceScoring &lt;options&gt;



Options (mandatory options marked with '*'):

  -in &lt;file&gt;*            Input file (OpenSwath results) (valid formats: 'featureXML')

  -lib &lt;file&gt;*           Assay library (valid formats: 'traML')

  -out &lt;file&gt;*           Output file (results with confidence scores) (valid formats: 'featureXML')

  -trafo &lt;file&gt;          Retention time transformation (valid formats: 'trafoXML')

  -decoys &lt;number&gt;       Number of decoy assays to select from the library for every true assay (0 for "all")

                         (default: '1000' min: '0')

  -transitions &lt;number&gt;  Number of transitions per feature to consider (highest intensities first; 0 for "all

                         ") (default: '6' min: '0')

                         

Common TOPP options:

  -ini &lt;file&gt;            Use the given TOPP INI file

  -threads &lt;n&gt;           Sets the number of threads allowed to be used by the TOPP tool (default: '1')

  -write_ini &lt;file&gt;      Writes the default configuration file

  --help                 Shows options

  --helphelp             Shows all options (including advanced)



</pre><p> <b>INI file documentation of this tool:</b> <div class="ini_global">
<div class="legend">
<b>Legend:</b><br>
 <div class="item item_required">required parameter</div>
 <div class="item item_advanced">advanced parameter</div>
</div>
  <div class="node"><span class="node_name">+OpenSwathConfidenceScoring</span><span class="node_description">Compute confidence scores for OpenSwath results</span></div>
    <div class="item item_advanced"><span class="item_name" style="padding-left:16px;">version</span><span class="item_value">2.4.0-HEAD-2019-12-09</span>
<span class="item_description">Version of the tool that generated this parameters file.</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>    <div class="node"><span class="node_name">++1</span><span class="node_description">Instance '1' section for 'OpenSwathConfidenceScoring'</span></div>
      <div class="item"><span class="item_name item_required" style="padding-left:24px;">in</span><span class="item_value"></span>
<span class="item_description">Input file (OpenSwath results)</span><span class="item_tags">input file</span><span class="item_restrictions">*.featureXML</span></div>      <div class="item"><span class="item_name item_required" style="padding-left:24px;">lib</span><span class="item_value"></span>
<span class="item_description">Assay library</span><span class="item_tags">input file</span><span class="item_restrictions">*.traML</span></div>      <div class="item"><span class="item_name item_required" style="padding-left:24px;">out</span><span class="item_value"></span>
<span class="item_description">Output file (results with confidence scores)</span><span class="item_tags">output file</span><span class="item_restrictions">*.featureXML</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">trafo</span><span class="item_value"></span>
<span class="item_description">Retention time transformation</span><span class="item_tags">input file</span><span class="item_restrictions">*.trafoXML</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">decoys</span><span class="item_value">1000</span>
<span class="item_description">Number of decoy assays to select from the library for every true assay (0 for "all")</span><span class="item_tags"></span><span class="item_restrictions">0:&#8734;</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">transitions</span><span class="item_value">6</span>
<span class="item_description">Number of transitions per feature to consider (highest intensities first; 0 for "all")</span><span class="item_tags"></span><span class="item_restrictions">0:&#8734;</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">log</span><span class="item_value"></span>
<span class="item_description">Name of log file (created only when specified)</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">debug</span><span class="item_value">0</span>
<span class="item_description">Sets the debug level</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">threads</span><span class="item_value">1</span>
<span class="item_description">Sets the number of threads allowed to be used by the TOPP tool</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">no_progress</span><span class="item_value">false</span>
<span class="item_description">Disables progress logging to command line</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">force</span><span class="item_value">false</span>
<span class="item_description">Overwrite tool specific checks.</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">test</span><span class="item_value">false</span>
<span class="item_description">Enables the test mode (needed for internal use only)</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="node"><span class="node_name">+++GLM</span><span class="node_description">Parameters of the binomial GLM</span></div>
        <div class="item item_advanced"><span class="item_name" style="padding-left:32px;">intercept</span><span class="item_value">3.87333466</span>
<span class="item_description">Intercept term</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>        <div class="item item_advanced"><span class="item_name" style="padding-left:32px;">delta_rt</span><span class="item_value">-0.02898629</span>
<span class="item_description">Coefficient of retention time difference</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>        <div class="item item_advanced"><span class="item_name" style="padding-left:32px;">dist_int</span><span class="item_value">-7.75880768</span>
<span class="item_description">Coefficient of intensity distance</span><span class="item_tags"></span><span class="item_restrictions"> </span></div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:28 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
