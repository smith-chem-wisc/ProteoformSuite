<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: MapAlignerPoseClustering</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a16239.html">User Quickstart Guide</a></li><li class="navelem"><a class="el" href="a16240.html">TOPP documentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MapAlignerPoseClustering </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Corrects retention time distortions between maps, using a pose clustering approach.</p>
<center> <table class="doxtable">
<tr>
<td align="center" bgcolor="#EBEBEB">potential predecessor tools  </td><td valign="middle" rowspan="2"><img class="formulaInl" alt="$ \longrightarrow $" src="form_34.png"/> MapAlignerPoseClustering <img class="formulaInl" alt="$ \longrightarrow $" src="form_34.png"/> </td><td align="center" bgcolor="#EBEBEB">potential successor tools   </td></tr>
<tr>
<td valign="middle" align="center" rowspan="1"><a class="el" href="a16271.html">FeatureFinderCentroided</a> <br  />
 (or another feature finding algorithm)  </td><td valign="middle" align="center" rowspan="1"><a class="el" href="a16279.html">FeatureLinkerUnlabeled</a> or <br  />
 <a class="el" href="a16281.html">FeatureLinkerUnlabeledQT</a>   </td></tr>
</table>
</center><p>This tool provides an algorithm to align the retention time scales of multiple input files, correcting shifts and distortions between them. Retention time adjustment may be necessary to correct for chromatography differences e.g. before data from multiple LC-MS runs can be combined (feature grouping), or when one run should be annotated with peptide identifications obtained in a different run.</p>
<p>All map alignment tools (MapAligner...) collect retention time data from the input files and - by fitting a model to this data - compute transformations that map all runs to a common retention time scale. They can apply the transformations right away and return output files with aligned time scales (parameter <code>out</code>), and/or return descriptions of the transformations in trafoXML format (parameter <code>trafo_out</code>). Transformations stored as trafoXML can be applied to arbitrary files with the <a class="el" href="a16307.html">MapRTTransformer</a> tool.</p>
<p>The map alignment tools differ in how they obtain retention time data for the modeling of transformations, and consequently what types of data they can be applied to. The alignment algorithm implemented here is the pose clustering algorithm as described in doi:10.1093/bioinformatics/btm209. It is used to find an affine transformation, which is further refined by a feature grouping step. This algorithm can be applied to features (featureXML) and peaks (mzML), but it has mostly been developed and tested on features. For more details and algorithm-specific parameters (set in the INI file) see "Detailed
  Description" in the <a class="el" href="a06993.html">algorithm documentation</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a16304.html">MapAlignerPoseClustering</a> <a class="el" href="a16305.html">MapAlignerSpectrum</a> <a class="el" href="a16307.html">MapRTTransformer</a></dd></dl>
<p>This algorithm uses an affine transformation model.</p>
<p>To speed up the alignment, consider reducing 'max_number_of_peaks_considered'. If your alignment is not good enough, consider increasing this number (the alignment will take longer though).</p>
<p><b>The command line parameters of this tool are:</b> <br  />
 </p><pre class="fragment">

MapAlignerPoseClustering -- Corrects retention time distortions between maps using a pose clustering approach

.

Full documentation: http://www.openms.de/documentation/TOPP_MapAlignerPoseClustering.html

Version: 2.4.0-HEAD-2019-12-09 Dec  9 2019, 13:47:09, Revision: af8a11e

To cite OpenMS:

  Rost HL, Sachsenberg T, Aiche S, Bielow C et al.. OpenMS: a flexible open-source software platform for mass spectrometry data analysis. Nat Meth. 2016; 13, 9: 741-748. doi:10.1038/nmeth.3959.



Usage:

  MapAlignerPoseClustering &lt;options&gt;



This tool has algorithm parameters that are not shown here! Please check the ini file for a detailed descript

ion or use the --helphelp option.



Options (mandatory options marked with '*'):

  -in &lt;files&gt;*               Input files to align (all must have the same file type) (valid formats: 'feature

                             XML', 'mzML')

  -out &lt;files&gt;               Output files (same file type as 'in'). This option or 'trafo_out' has to be prov

                             ided; they can be used together. (valid formats: 'featureXML', 'mzML')

  -trafo_out &lt;files&gt;         Transformation output files. This option or 'out' has to be provided; they can 

                             be used together. (valid formats: 'trafoXML')



Options to define a reference file (use either 'file' or 'index', not both):

  -reference:file &lt;file&gt;     File to use as reference (same file format as input files required) (valid forma

                             ts: 'featureXML', 'mzML')

  -reference:index &lt;number&gt;  Use one of the input files as reference ('1' for the first file, etc.).

                             If '0', no explicit reference is set - the algorithm will select a reference. (

                             default: '0' min: '0')



                             

Common TOPP options:

  -ini &lt;file&gt;                Use the given TOPP INI file

  -threads &lt;n&gt;               Sets the number of threads allowed to be used by the TOPP tool (default: '1')

  -write_ini &lt;file&gt;          Writes the default configuration file

  --help                     Shows options

  --helphelp                 Shows all options (including advanced)



The following configuration subsections are valid:

 - algorithm   Algorithm parameters section



You can write an example INI file using the '-write_ini' option.

Documentation of subsection parameters can be found in the doxygen documentation or the INIFileEditor.

For more information, please consult the online documentation for this tool:

  - http://www.openms.de/documentation/TOPP_MapAlignerPoseClustering.html



</pre><p> <b>INI file documentation of this tool:</b> <div class="ini_global">
<div class="legend">
<b>Legend:</b><br>
 <div class="item item_required">required parameter</div>
 <div class="item item_advanced">advanced parameter</div>
</div>
  <div class="node"><span class="node_name">+MapAlignerPoseClustering</span><span class="node_description">Corrects retention time distortions between maps using a pose clustering approach.</span></div>
    <div class="item item_advanced"><span class="item_name" style="padding-left:16px;">version</span><span class="item_value">2.4.0-HEAD-2019-12-09</span>
<span class="item_description">Version of the tool that generated this parameters file.</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>    <div class="node"><span class="node_name">++1</span><span class="node_description">Instance '1' section for 'MapAlignerPoseClustering'</span></div>
      <div class="item"><span class="item_name item_required" style="padding-left:24px;">in</span><span class="item_value">[]</span>
<span class="item_description">Input files to align (all must have the same file type)</span><span class="item_tags">input file</span><span class="item_restrictions">*.featureXML,*.mzML</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">out</span><span class="item_value">[]</span>
<span class="item_description">Output files (same file type as 'in'). This option or 'trafo_out' has to be provided; they can be used together.</span><span class="item_tags">output file</span><span class="item_restrictions">*.featureXML,*.mzML</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">trafo_out</span><span class="item_value">[]</span>
<span class="item_description">Transformation output files. This option or 'out' has to be provided; they can be used together.</span><span class="item_tags">output file</span><span class="item_restrictions">*.trafoXML</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">log</span><span class="item_value"></span>
<span class="item_description">Name of log file (created only when specified)</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">debug</span><span class="item_value">0</span>
<span class="item_description">Sets the debug level</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">threads</span><span class="item_value">1</span>
<span class="item_description">Sets the number of threads allowed to be used by the TOPP tool</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">no_progress</span><span class="item_value">false</span>
<span class="item_description">Disables progress logging to command line</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">force</span><span class="item_value">false</span>
<span class="item_description">Overwrite tool specific checks.</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">test</span><span class="item_value">false</span>
<span class="item_description">Enables the test mode (needed for internal use only)</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="node"><span class="node_name">+++reference</span><span class="node_description">Options to define a reference file (use either 'file' or 'index', not both)</span></div>
        <div class="item"><span class="item_name" style="padding-left:32px;">file</span><span class="item_value"></span>
<span class="item_description">File to use as reference (same file format as input files required)</span><span class="item_tags">input file</span><span class="item_restrictions">*.featureXML,*.mzML</span></div>        <div class="item"><span class="item_name" style="padding-left:32px;">index</span><span class="item_value">0</span>
<span class="item_description">Use one of the input files as reference ('1' for the first file, etc.).<br>If '0', no explicit reference is set - the algorithm will select a reference.</span><span class="item_tags"></span><span class="item_restrictions">0:&#8734;</span></div>      <div class="node"><span class="node_name">+++algorithm</span><span class="node_description">Algorithm parameters section</span></div>
        <div class="item"><span class="item_name" style="padding-left:32px;">max_num_peaks_considered</span><span class="item_value">1000</span>
<span class="item_description">The maximal number of peaks/features to be considered per map. To use all, set to '-1'.</span><span class="item_tags"></span><span class="item_restrictions">-1:&#8734;</span></div>        <div class="node"><span class="node_name">++++superimposer</span><span class="node_description"></span></div>
          <div class="item"><span class="item_name" style="padding-left:40px;">mz_pair_max_distance</span><span class="item_value">0.5</span>
<span class="item_description">Maximum of m/z deviation of corresponding elements in different maps.  This condition applies to the pairs considered in hashing.</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>          <div class="item item_advanced"><span class="item_name" style="padding-left:40px;">rt_pair_distance_fraction</span><span class="item_value">0.1</span>
<span class="item_description">Within each of the two maps, the pairs considered for pose clustering must be separated by at least this fraction of the total elution time interval (i.e., max - min).  </span><span class="item_tags"></span><span class="item_restrictions">0.0:1.0</span></div>          <div class="item"><span class="item_name" style="padding-left:40px;">num_used_points</span><span class="item_value">2000</span>
<span class="item_description">Maximum number of elements considered in each map (selected by intensity).  Use this to reduce the running time and to disregard weak signals during alignment.  For using all points, set this to -1.</span><span class="item_tags"></span><span class="item_restrictions">-1:&#8734;</span></div>          <div class="item"><span class="item_name" style="padding-left:40px;">scaling_bucket_size</span><span class="item_value">0.005</span>
<span class="item_description">The scaling of the retention time interval is being hashed into buckets of this size during pose clustering.  A good choice for this would be a bit smaller than the error you would expect from repeated runs.</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>          <div class="item"><span class="item_name" style="padding-left:40px;">shift_bucket_size</span><span class="item_value">3.0</span>
<span class="item_description">The shift at the lower (respectively, higher) end of the retention time interval is being hashed into buckets of this size during pose clustering.  A good choice for this would be about the time between consecutive MS scans.</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>          <div class="item item_advanced"><span class="item_name" style="padding-left:40px;">max_shift</span><span class="item_value">1000.0</span>
<span class="item_description">Maximal shift which is considered during histogramming (in seconds).  This applies for both directions.</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>          <div class="item item_advanced"><span class="item_name" style="padding-left:40px;">max_scaling</span><span class="item_value">2.0</span>
<span class="item_description">Maximal scaling which is considered during histogramming.  The minimal scaling is the reciprocal of this.</span><span class="item_tags"></span><span class="item_restrictions">1.0:&#8734;</span></div>          <div class="item item_advanced"><span class="item_name" style="padding-left:40px;">dump_buckets</span><span class="item_value"></span>
<span class="item_description">[DEBUG] If non-empty, base filename where hash table buckets will be dumped to.  A serial number for each invocation will be appended automatically.</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>          <div class="item item_advanced"><span class="item_name" style="padding-left:40px;">dump_pairs</span><span class="item_value"></span>
<span class="item_description">[DEBUG] If non-empty, base filename where the individual hashed pairs will be dumped to (large!).  A serial number for each invocation will be appended automatically.</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>        <div class="node"><span class="node_name">++++pairfinder</span><span class="node_description"></span></div>
          <div class="item"><span class="item_name" style="padding-left:40px;">second_nearest_gap</span><span class="item_value">2.0</span>
<span class="item_description">Only link features whose distance to the second nearest neighbors (for both sides) is larger by 'second_nearest_gap' than the distance between the matched pair itself.</span><span class="item_tags"></span><span class="item_restrictions">1.0:&#8734;</span></div>          <div class="item"><span class="item_name" style="padding-left:40px;">use_identifications</span><span class="item_value">false</span>
<span class="item_description">Never link features that are annotated with different peptides (features without ID's always match; only the best hit per peptide identification is considered).</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>          <div class="item"><span class="item_name" style="padding-left:40px;">ignore_charge</span><span class="item_value">false</span>
<span class="item_description">false [default]: pairing requires equal charge state (or at least one unknown charge '0'); true: Pairing irrespective of charge state</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>          <div class="item"><span class="item_name" style="padding-left:40px;">ignore_adduct</span><span class="item_value">true</span>
<span class="item_description">true [default]: pairing requires equal adducts (or at least one without adduct annotation); true: Pairing irrespective of adducts</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>          <div class="node"><span class="node_name">+++++distance_RT</span><span class="node_description">Distance component based on RT differences</span></div>
            <div class="item"><span class="item_name" style="padding-left:48px;">max_difference</span><span class="item_value">100.0</span>
<span class="item_description">Never pair features with a larger RT distance (in seconds).</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">exponent</span><span class="item_value">1.0</span>
<span class="item_description">Normalized RT differences ([0-1], relative to 'max_difference') are raised to this power (using 1 or 2 will be fast, everything else is REALLY slow)</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">weight</span><span class="item_value">1.0</span>
<span class="item_description">Final RT distances are weighted by this factor</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>          <div class="node"><span class="node_name">+++++distance_MZ</span><span class="node_description">Distance component based on m/z differences</span></div>
            <div class="item"><span class="item_name" style="padding-left:48px;">max_difference</span><span class="item_value">0.3</span>
<span class="item_description">Never pair features with larger m/z distance (unit defined by 'unit')</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>            <div class="item"><span class="item_name" style="padding-left:48px;">unit</span><span class="item_value">Da</span>
<span class="item_description">Unit of the 'max_difference' parameter</span><span class="item_tags"></span><span class="item_restrictions">Da,ppm</span></div>            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">exponent</span><span class="item_value">2.0</span>
<span class="item_description">Normalized ([0-1], relative to 'max_difference') m/z differences are raised to this power (using 1 or 2 will be fast, everything else is REALLY slow)</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">weight</span><span class="item_value">1.0</span>
<span class="item_description">Final m/z distances are weighted by this factor</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>          <div class="node"><span class="node_name">+++++distance_intensity</span><span class="node_description">Distance component based on differences in relative intensity (usually relative to highest peak in the whole data set)</span></div>
            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">exponent</span><span class="item_value">1.0</span>
<span class="item_description">Differences in relative intensity ([0-1]) are raised to this power (using 1 or 2 will be fast, everything else is REALLY slow)</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">weight</span><span class="item_value">0.0</span>
<span class="item_description">Final intensity distances are weighted by this factor</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>            <div class="item item_advanced"><span class="item_name" style="padding-left:48px;">log_transform</span><span class="item_value">disabled</span>
<span class="item_description">Log-transform intensities? If disabled, d = |int_f2 - int_f1| / int_max. If enabled, d = |log(int_f2 + 1) - log(int_f1 + 1)| / log(int_max + 1))</span><span class="item_tags"></span><span class="item_restrictions">enabled,disabled</span></div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:28 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
