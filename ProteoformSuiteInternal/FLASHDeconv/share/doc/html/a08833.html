<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: MZTrafoModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a05822.html">OpenMS</a></li><li class="navelem"><a class="el" href="a08833.html">MZTrafoModel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="a08830.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MZTrafoModel Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Create and apply models of a mass recalibration function.  
 <a href="a08833.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a03671_source.html">OpenMS/FILTERING/CALIBRATION/MZTrafoModel.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08837.html">RTLess</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comparator by position. As this class has dimension 1, this is basically an alias for MZLess.  <a href="a08837.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aee10ef272753332e5050a1c05d131603"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a> { <br />
&#160;&#160;<a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603adc101ebf31c49c2d4b80b7c6f59f22cb">LINEAR</a>, 
<a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603a74289dfc8a29a091749f9e03a60eac45">LINEAR_WEIGHTED</a>, 
<a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603a2e8d8a1445172e2e64293e1dd0558b0a">QUADRATIC</a>, 
<a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603a4494861916e63cb995f2b18334b36035">QUADRATIC_WEIGHTED</a>, 
<br />
&#160;&#160;<a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603a9440192edd1a7e80a76e4c0765754432">SIZE_OF_MODELTYPE</a>
<br />
 }</td></tr>
<tr class="separator:aee10ef272753332e5050a1c05d131603"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0bc3b6db4227619100ee9607fb4279ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a0bc3b6db4227619100ee9607fb4279ec">MZTrafoModel</a> ()</td></tr>
<tr class="memdesc:a0bc3b6db4227619100ee9607fb4279ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="a08833.html#a0bc3b6db4227619100ee9607fb4279ec">More...</a><br /></td></tr>
<tr class="separator:a0bc3b6db4227619100ee9607fb4279ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe3ddd39d637a888bee14a4b9a4e15a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a5fe3ddd39d637a888bee14a4b9a4e15a">MZTrafoModel</a> (bool ppm_model)</td></tr>
<tr class="memdesc:a5fe3ddd39d637a888bee14a4b9a4e15a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="a08833.html#a5fe3ddd39d637a888bee14a4b9a4e15a">More...</a><br /></td></tr>
<tr class="separator:a5fe3ddd39d637a888bee14a4b9a4e15a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d13eb42e874637ddaac0173a78bd94"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a32d13eb42e874637ddaac0173a78bd94">isTrained</a> () const</td></tr>
<tr class="memdesc:a32d13eb42e874637ddaac0173a78bd94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the model have coefficients (i.e. was trained successfully).  <a href="a08833.html#a32d13eb42e874637ddaac0173a78bd94">More...</a><br /></td></tr>
<tr class="separator:a32d13eb42e874637ddaac0173a78bd94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1529ca20d43500a280e162a759dd993f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00001.html#a12109">double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a1529ca20d43500a280e162a759dd993f">getRT</a> () const</td></tr>
<tr class="memdesc:a1529ca20d43500a280e162a759dd993f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get RT associated with the model (training region)  <a href="a08833.html#a1529ca20d43500a280e162a759dd993f">More...</a><br /></td></tr>
<tr class="separator:a1529ca20d43500a280e162a759dd993f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616bc5072078e61872b9408f56cdd124"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00001.html#a12109">double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a616bc5072078e61872b9408f56cdd124">predict</a> (<a class="el" href="a00001.html#a12109">double</a> mz) const</td></tr>
<tr class="memdesc:a616bc5072078e61872b9408f56cdd124"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the model to an uncalibrated m/z value.  <a href="a08833.html#a616bc5072078e61872b9408f56cdd124">More...</a><br /></td></tr>
<tr class="separator:a616bc5072078e61872b9408f56cdd124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639f2c6e99ac74afc193e28a3c916c20"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a639f2c6e99ac74afc193e28a3c916c20">train</a> (const <a class="el" href="a08525.html">CalibrationData</a> &amp;cd, <a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a> md, bool use_RANSAC, <a class="el" href="a00001.html#a12109">double</a> rt_left=-std::numeric_limits&lt; <a class="el" href="a00001.html#a12109">double</a> &gt;::max(), <a class="el" href="a00001.html#a12109">double</a> rt_right=std::numeric_limits&lt; <a class="el" href="a00001.html#a12109">double</a> &gt;::max())</td></tr>
<tr class="memdesc:a639f2c6e99ac74afc193e28a3c916c20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Train a model using calibrant data.  <a href="a08833.html#a639f2c6e99ac74afc193e28a3c916c20">More...</a><br /></td></tr>
<tr class="separator:a639f2c6e99ac74afc193e28a3c916c20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d42220d2eec38ddec8a40aa4a4fbf75"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a7d42220d2eec38ddec8a40aa4a4fbf75">train</a> (std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt; error_mz, std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt; theo_mz, std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt; weights, <a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a> md, bool use_RANSAC)</td></tr>
<tr class="memdesc:a7d42220d2eec38ddec8a40aa4a4fbf75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Train a model using calibrant data.  <a href="a08833.html#a7d42220d2eec38ddec8a40aa4a4fbf75">More...</a><br /></td></tr>
<tr class="separator:a7d42220d2eec38ddec8a40aa4a4fbf75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122204465b394f68de38c0ebf4f7ddd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a122204465b394f68de38c0ebf4f7ddd1">getCoefficients</a> (<a class="el" href="a00001.html#a12109">double</a> &amp;intercept, <a class="el" href="a00001.html#a12109">double</a> &amp;slope, <a class="el" href="a00001.html#a12109">double</a> &amp;power)</td></tr>
<tr class="memdesc:a122204465b394f68de38c0ebf4f7ddd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get model coefficients.  <a href="a08833.html#a122204465b394f68de38c0ebf4f7ddd1">More...</a><br /></td></tr>
<tr class="separator:a122204465b394f68de38c0ebf4f7ddd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95343441489b77c6abf8546e4069f60a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a95343441489b77c6abf8546e4069f60a">setCoefficients</a> (const <a class="el" href="a08833.html">MZTrafoModel</a> &amp;rhs)</td></tr>
<tr class="memdesc:a95343441489b77c6abf8546e4069f60a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy model coefficients from another model.  <a href="a08833.html#a95343441489b77c6abf8546e4069f60a">More...</a><br /></td></tr>
<tr class="separator:a95343441489b77c6abf8546e4069f60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a1657a0f520c507cdf88b81c1ff156c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a6a1657a0f520c507cdf88b81c1ff156c">setCoefficients</a> (<a class="el" href="a00001.html#a12109">double</a> intercept, <a class="el" href="a00001.html#a12109">double</a> slope, <a class="el" href="a00001.html#a12109">double</a> power)</td></tr>
<tr class="memdesc:a6a1657a0f520c507cdf88b81c1ff156c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually set model coefficients.  <a href="a08833.html#a6a1657a0f520c507cdf88b81c1ff156c">More...</a><br /></td></tr>
<tr class="separator:a6a1657a0f520c507cdf88b81c1ff156c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b2839c6b49fe42966074e2375553d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a08769.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a26b2839c6b49fe42966074e2375553d7">toString</a> () const</td></tr>
<tr class="memdesc:a26b2839c6b49fe42966074e2375553d7"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="a08769.html" title="A more convenient string class.">String</a> representation of the model parameters.  <a href="a08833.html#a26b2839c6b49fe42966074e2375553d7">More...</a><br /></td></tr>
<tr class="separator:a26b2839c6b49fe42966074e2375553d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac4dde3e1d2489b9a5575583889bed8e2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#ac4dde3e1d2489b9a5575583889bed8e2">nameToEnum</a> (const std::string &amp;name)</td></tr>
<tr class="memdesc:ac4dde3e1d2489b9a5575583889bed8e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert string to enum.  <a href="a08833.html#ac4dde3e1d2489b9a5575583889bed8e2">More...</a><br /></td></tr>
<tr class="separator:ac4dde3e1d2489b9a5575583889bed8e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbf8e53e0e22cb3cdd7b67cf285ff968"><td class="memItemLeft" align="right" valign="top">static const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#abbf8e53e0e22cb3cdd7b67cf285ff968">enumToName</a> (<a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a> mt)</td></tr>
<tr class="memdesc:abbf8e53e0e22cb3cdd7b67cf285ff968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert enum to string.  <a href="a08833.html#abbf8e53e0e22cb3cdd7b67cf285ff968">More...</a><br /></td></tr>
<tr class="separator:abbf8e53e0e22cb3cdd7b67cf285ff968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c1f3e9c1a0b48a740657960c9819c5b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a0c1f3e9c1a0b48a740657960c9819c5b">setRANSACParams</a> (const <a class="el" href="a10265.html">Math::RANSACParam</a> &amp;p)</td></tr>
<tr class="memdesc:a0c1f3e9c1a0b48a740657960c9819c5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the global (program wide) parameters for RANSAC.  <a href="a08833.html#a0c1f3e9c1a0b48a740657960c9819c5b">More...</a><br /></td></tr>
<tr class="separator:a0c1f3e9c1a0b48a740657960c9819c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a259d706b05825194aab04f4675f7c41f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a259d706b05825194aab04f4675f7c41f">setCoefficientLimits</a> (<a class="el" href="a00001.html#a12109">double</a> offset, <a class="el" href="a00001.html#a12109">double</a> scale, <a class="el" href="a00001.html#a12109">double</a> power)</td></tr>
<tr class="memdesc:a259d706b05825194aab04f4675f7c41f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set coefficient boundaries for which the model coefficient must not exceed to be considered a valid model.  <a href="a08833.html#a259d706b05825194aab04f4675f7c41f">More...</a><br /></td></tr>
<tr class="separator:a259d706b05825194aab04f4675f7c41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a269da0b9cea5776113b60acb9002f9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9">isValidModel</a> (const <a class="el" href="a08833.html">MZTrafoModel</a> &amp;trafo)</td></tr>
<tr class="memdesc:a6a269da0b9cea5776113b60acb9002f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predicate to decide if the model has valid parameters, i.e. coefficients.  <a href="a08833.html#a6a269da0b9cea5776113b60acb9002f9">More...</a><br /></td></tr>
<tr class="separator:a6a269da0b9cea5776113b60acb9002f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c918450509db8b8d60ea3f6a04e6e8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a05782.html#gaf9ecec2d692138fab9167164a457cbd4">Size</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#ab4c918450509db8b8d60ea3f6a04e6e8">findNearest</a> (const std::vector&lt; <a class="el" href="a08833.html">MZTrafoModel</a> &gt; &amp;tms, <a class="el" href="a00001.html#a12109">double</a> rt)</td></tr>
<tr class="memdesc:ab4c918450509db8b8d60ea3f6a04e6e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binary search for the model nearest to a specific RT.  <a href="a08833.html#ab4c918450509db8b8d60ea3f6a04e6e8">More...</a><br /></td></tr>
<tr class="separator:ab4c918450509db8b8d60ea3f6a04e6e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a311a641a091784f7c13bb95451cc0b71"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a311a641a091784f7c13bb95451cc0b71">names_of_modeltype</a> []</td></tr>
<tr class="memdesc:a311a641a091784f7c13bb95451cc0b71"><td class="mdescLeft">&#160;</td><td class="mdescRight">strings corresponding to enum MODELTYPE  <a href="a08833.html#a311a641a091784f7c13bb95451cc0b71">More...</a><br /></td></tr>
<tr class="separator:a311a641a091784f7c13bb95451cc0b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab31d039027f757beea3da5845d31255d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#ab31d039027f757beea3da5845d31255d">coeff_</a></td></tr>
<tr class="memdesc:ab31d039027f757beea3da5845d31255d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Model coefficients (for both linear and quadratic models), estimated from the data.  <a href="a08833.html#ab31d039027f757beea3da5845d31255d">More...</a><br /></td></tr>
<tr class="separator:ab31d039027f757beea3da5845d31255d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19864090c3024c23d1a8d5d2639457dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a19864090c3024c23d1a8d5d2639457dc">use_ppm_</a></td></tr>
<tr class="memdesc:a19864090c3024c23d1a8d5d2639457dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">during training, model is build on absolute or relative(ppm) predictions. <a class="el" href="a08833.html#a616bc5072078e61872b9408f56cdd124" title="Apply the model to an uncalibrated m/z value.">predict()</a>, i.e. applying the model, requires this information too  <a href="a08833.html#a19864090c3024c23d1a8d5d2639457dc">More...</a><br /></td></tr>
<tr class="separator:a19864090c3024c23d1a8d5d2639457dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab64d07aa179cf2b1fac14777c99b41af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00001.html#a12109">double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#ab64d07aa179cf2b1fac14777c99b41af">rt_</a></td></tr>
<tr class="memdesc:ab64d07aa179cf2b1fac14777c99b41af"><td class="mdescLeft">&#160;</td><td class="mdescRight">retention time associated to the model (i.e. where the calibrant data was taken from)  <a href="a08833.html#ab64d07aa179cf2b1fac14777c99b41af">More...</a><br /></td></tr>
<tr class="separator:ab64d07aa179cf2b1fac14777c99b41af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ac386b40e1b9eab5982a60ebdfc5e0609"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a10265.html">Math::RANSACParam</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#ac386b40e1b9eab5982a60ebdfc5e0609">ransac_params_</a></td></tr>
<tr class="memdesc:ac386b40e1b9eab5982a60ebdfc5e0609"><td class="mdescLeft">&#160;</td><td class="mdescRight">global pointer, init to NULL at startup; set class-global RANSAC params  <a href="a08833.html#ac386b40e1b9eab5982a60ebdfc5e0609">More...</a><br /></td></tr>
<tr class="separator:ac386b40e1b9eab5982a60ebdfc5e0609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c723d05b2c008da9ef33ce5446207da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00001.html#a12109">double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a4c723d05b2c008da9ef33ce5446207da">limit_offset_</a></td></tr>
<tr class="memdesc:a4c723d05b2c008da9ef33ce5446207da"><td class="mdescLeft">&#160;</td><td class="mdescRight">acceptable boundary for the estimated offset; if estimated offset is larger (absolute) the model does not validate (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>)  <a href="a08833.html#a4c723d05b2c008da9ef33ce5446207da">More...</a><br /></td></tr>
<tr class="separator:a4c723d05b2c008da9ef33ce5446207da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a110d624f432d2c118323344db9373c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00001.html#a12109">double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a9a110d624f432d2c118323344db9373c">limit_scale_</a></td></tr>
<tr class="memdesc:a9a110d624f432d2c118323344db9373c"><td class="mdescLeft">&#160;</td><td class="mdescRight">acceptable boundary for the estimated scale; if estimated scale is larger (absolute) the model does not validate (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>)  <a href="a08833.html#a9a110d624f432d2c118323344db9373c">More...</a><br /></td></tr>
<tr class="separator:a9a110d624f432d2c118323344db9373c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609b582adb1600301f26f0a3c09065da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00001.html#a12109">double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08833.html#a609b582adb1600301f26f0a3c09065da">limit_power_</a></td></tr>
<tr class="memdesc:a609b582adb1600301f26f0a3c09065da"><td class="mdescLeft">&#160;</td><td class="mdescRight">acceptable boundary for the estimated power; if estimated power is larger (absolute) the model does not validate (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>)  <a href="a08833.html#a609b582adb1600301f26f0a3c09065da">More...</a><br /></td></tr>
<tr class="separator:a609b582adb1600301f26f0a3c09065da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Create and apply models of a mass recalibration function. </p>
<p>The input is a list of calibration points (ideally spanning a wide m/z range to prevent extrapolation when applying to model).</p>
<p>Models (LINEAR, LINEAR_WEIGHTED, QUADRATIC, QUADRATIC_WEIGHTED) can be trained using CalData points (or a subset of them). Calibration points can have different retention time points, and a model should be build such that it captures the local (in time) decalibration of the instrument, i.e. choose appropriate time windows along RT to calibrate the spectra in this RT region. From the available calibrant data, a model is build. Later, any uncalibrated m/z value can be fed to the model, to obtain a calibrated m/z.</p>
<p>The input domain can either be absolute mass differences in [Th], or relative differences in [ppm]. The models are build based on this input.</p>
<p>Outlier detection before model building via the RANSAC algorithm is supported for LINEAR and QUADRATIC models. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aee10ef272753332e5050a1c05d131603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee10ef272753332e5050a1c05d131603">&#9670;&nbsp;</a></span>MODELTYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aee10ef272753332e5050a1c05d131603adc101ebf31c49c2d4b80b7c6f59f22cb"></a>LINEAR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee10ef272753332e5050a1c05d131603a74289dfc8a29a091749f9e03a60eac45"></a>LINEAR_WEIGHTED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee10ef272753332e5050a1c05d131603a2e8d8a1445172e2e64293e1dd0558b0a"></a>QUADRATIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee10ef272753332e5050a1c05d131603a4494861916e63cb995f2b18334b36035"></a>QUADRATIC_WEIGHTED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee10ef272753332e5050a1c05d131603a9440192edd1a7e80a76e4c0765754432"></a>SIZE_OF_MODELTYPE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0bc3b6db4227619100ee9607fb4279ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bc3b6db4227619100ee9607fb4279ec">&#9670;&nbsp;</a></span>MZTrafoModel() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a08833.html">MZTrafoModel</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

</div>
</div>
<a id="a5fe3ddd39d637a888bee14a4b9a4e15a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fe3ddd39d637a888bee14a4b9a4e15a">&#9670;&nbsp;</a></span>MZTrafoModel() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a08833.html">MZTrafoModel</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ppm_model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p>If you have external coefficients, use this constructor and the <a class="el" href="a08833.html#a95343441489b77c6abf8546e4069f60a" title="Copy model coefficients from another model.">setCoefficients()</a> method to build a 'manual' model. Afterwards, use applyTransformation() or <a class="el" href="a08833.html#a616bc5072078e61872b9408f56cdd124" title="Apply the model to an uncalibrated m/z value.">predict()</a> to calibrate your data. If you call <a class="el" href="a08833.html#a639f2c6e99ac74afc193e28a3c916c20" title="Train a model using calibrant data.">train()</a>, the ppm-setting will be overwritten, depending on the type of training data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ppm_model</td><td>Are the coefficients derived from ppm calibration data, or from absolute deltas? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abbf8e53e0e22cb3cdd7b67cf285ff968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbf8e53e0e22cb3cdd7b67cf285ff968">&#9670;&nbsp;</a></span>enumToName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const std::string&amp; enumToName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a>&#160;</td>
          <td class="paramname"><em>mt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert enum to string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mt</td><td>The enum value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Stringified version </dd></dl>

</div>
</div>
<a id="ab4c918450509db8b8d60ea3f6a04e6e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c918450509db8b8d60ea3f6a04e6e8">&#9670;&nbsp;</a></span>findNearest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="a05782.html#gaf9ecec2d692138fab9167164a457cbd4">Size</a> findNearest </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="a08833.html">MZTrafoModel</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>rt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Binary search for the model nearest to a specific RT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tms</td><td>Vector of models, sorted by RT </td></tr>
    <tr><td class="paramname">rt</td><td>The target retention time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the index into 'tms' with the closest RT.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Make sure the vector is sorted with respect to RT! Otherwise the result is undefined.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="a08273.html" title="Precondition failed exception.">Exception::Precondition</a></td><td>is thrown if the vector is empty (not only in debug mode) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a122204465b394f68de38c0ebf4f7ddd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122204465b394f68de38c0ebf4f7ddd1">&#9670;&nbsp;</a></span>getCoefficients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getCoefficients </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a> &amp;&#160;</td>
          <td class="paramname"><em>intercept</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a> &amp;&#160;</td>
          <td class="paramname"><em>slope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a> &amp;&#160;</td>
          <td class="paramname"><em>power</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get model coefficients. </p>
<p>Parameters will be filled with internal model parameters. The model must be trained before; <a class="el" href="a05827.html" title="Exception namespace">Exception</a> is thrown otherwise!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intercept</td><td>The intercept </td></tr>
    <tr><td class="paramname">slope</td><td>The slope </td></tr>
    <tr><td class="paramname">power</td><td>The coefficient for x*x (will be 0 for linear models) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="a08273.html" title="Precondition failed exception.">Exception::Precondition</a></td><td>if model is not trained yet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1529ca20d43500a280e162a759dd993f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1529ca20d43500a280e162a759dd993f">&#9670;&nbsp;</a></span>getRT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html#a12109">double</a> getRT </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get RT associated with the model (training region) </p>

</div>
</div>
<a id="a32d13eb42e874637ddaac0173a78bd94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d13eb42e874637ddaac0173a78bd94">&#9670;&nbsp;</a></span>isTrained()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isTrained </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does the model have coefficients (i.e. was trained successfully). </p>
<p>Having coefficients does not mean its valid (see <a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>; since coeffs might be too large). </p>

</div>
</div>
<a id="a6a269da0b9cea5776113b60acb9002f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a269da0b9cea5776113b60acb9002f9">&#9670;&nbsp;</a></span>isValidModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isValidModel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a08833.html">MZTrafoModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trafo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Predicate to decide if the model has valid parameters, i.e. coefficients. </p>
<p>If the model coefficients are empty, no model was trained yet (or unsuccessful), causing a return value of 'false'.</p>
<p>Also, if the model has coefficients, we check if they are within the acceptable boundaries (if boundaries were given via setCoeffientLimits()). </p>

</div>
</div>
<a id="ac4dde3e1d2489b9a5575583889bed8e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4dde3e1d2489b9a5575583889bed8e2">&#9670;&nbsp;</a></span>nameToEnum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a> nameToEnum </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert string to enum. </p>
<p>Returns 'SIZE_OF_MODELTYPE' if string is unknown. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>A string from names_of_modeltype[]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding enum value. </dd></dl>

</div>
</div>
<a id="a616bc5072078e61872b9408f56cdd124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616bc5072078e61872b9408f56cdd124">&#9670;&nbsp;</a></span>predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html#a12109">double</a> predict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>mz</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the model to an uncalibrated m/z value. </p>
<p>Make sure the model was trained (<a class="el" href="a08833.html#a639f2c6e99ac74afc193e28a3c916c20" title="Train a model using calibrant data.">train()</a>) and is valid (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>) before calling this function!</p>
<p>Applies the function y = intercept + slope*mz + power*mz^2 and returns y.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mz</td><td>The uncalibrated m/z value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calibrated m/z value </dd></dl>

</div>
</div>
<a id="a259d706b05825194aab04f4675f7c41f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a259d706b05825194aab04f4675f7c41f">&#9670;&nbsp;</a></span>setCoefficientLimits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setCoefficientLimits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>power</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set coefficient boundaries for which the model coefficient must not exceed to be considered a valid model. </p>
<p>Use std::numeric_limits&lt;double&gt;::max() for no limit (default). If <a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a> is called these limits are checked. Negative input run through fabs() to get positive values (since comparison is done in absolute terms). </p>

<p class="reference">Referenced by <a class="el" href="a12013.html#a5a65b4035245e1aa1ba123aa26d84150">UTILProteomicsLFQ::recalibrateMasses_()</a>.</p>

</div>
</div>
<a id="a95343441489b77c6abf8546e4069f60a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95343441489b77c6abf8546e4069f60a">&#9670;&nbsp;</a></span>setCoefficients() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCoefficients </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a08833.html">MZTrafoModel</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy model coefficients from another model. </p>

</div>
</div>
<a id="a6a1657a0f520c507cdf88b81c1ff156c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a1657a0f520c507cdf88b81c1ff156c">&#9670;&nbsp;</a></span>setCoefficients() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCoefficients </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>intercept</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>slope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>power</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manually set model coefficients. </p>
<p>Can be used instead of <a class="el" href="a08833.html#a639f2c6e99ac74afc193e28a3c916c20" title="Train a model using calibrant data.">train()</a>, so manually set coefficients. It must be exactly three values. If you want a linear model, set 'power' to zero. If you want a constant model, set slope to zero in addition.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intercept</td><td>The offset </td></tr>
    <tr><td class="paramname">slope</td><td>The slope </td></tr>
    <tr><td class="paramname">power</td><td>The x*x coefficient (for quadratic models) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c1f3e9c1a0b48a740657960c9819c5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c1f3e9c1a0b48a740657960c9819c5b">&#9670;&nbsp;</a></span>setRANSACParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setRANSACParams </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a10265.html">Math::RANSACParam</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the global (program wide) parameters for RANSAC. </p>
<p>This is not done via member, to keep a small memory footprint since hundreds of MZTrafoModels are expected to be build at the same time and the RANSAC params should be identical for all of them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>RANSAC params </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="a12013.html#a5a65b4035245e1aa1ba123aa26d84150">UTILProteomicsLFQ::recalibrateMasses_()</a>.</p>

</div>
</div>
<a id="a26b2839c6b49fe42966074e2375553d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b2839c6b49fe42966074e2375553d7">&#9670;&nbsp;</a></span>toString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a08769.html">String</a> toString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="a08769.html" title="A more convenient string class.">String</a> representation of the model parameters. </p>
<p>Empty if model is not trained. </p>

</div>
</div>
<a id="a639f2c6e99ac74afc193e28a3c916c20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a639f2c6e99ac74afc193e28a3c916c20">&#9670;&nbsp;</a></span>train() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool train </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a08525.html">CalibrationData</a> &amp;&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a>&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_RANSAC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>rt_left</em> = <code>-std::numeric_limits&lt;&#160;<a class="el" href="a00001.html#a12109">double</a>&#160;&gt;::max()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00001.html#a12109">double</a>&#160;</td>
          <td class="paramname"><em>rt_right</em> = <code>std::numeric_limits&lt;&#160;<a class="el" href="a00001.html#a12109">double</a>&#160;&gt;::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Train a model using calibrant data. </p>
<p>If the <a class="el" href="a08525.html" title="A helper class, holding all calibration points.">CalibrationData</a> were created using peak groups (usually corresponding to mass traces), the median for each group is used as a group representative. This is more robust, and reduces the number of data points drastically, i.e. one value per group.</p>
<p>Internally, these steps take place:</p><ul>
<li>apply RT filter</li>
<li>[compute median per group] (only if groups were given in 'cd')</li>
<li>set Model's rt position</li>
<li>call <a class="el" href="a08833.html#a639f2c6e99ac74afc193e28a3c916c20" title="Train a model using calibrant data.">train()</a> (see overloaded method)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>List of calibrants </td></tr>
    <tr><td class="paramname">md</td><td>Type of model (linear, quadratic, ...) </td></tr>
    <tr><td class="paramname">use_RANSAC</td><td>Remove outliers before computing the model? </td></tr>
    <tr><td class="paramname">rt_left</td><td>Filter 'cd' by RT; all calibrants with RT &lt; 'rt_left' are removed </td></tr>
    <tr><td class="paramname">rt_right</td><td>Filter 'cd' by RT; all calibrants with RT &gt; 'rt_right' are removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if model was build, false otherwise </dd></dl>

</div>
</div>
<a id="a7d42220d2eec38ddec8a40aa4a4fbf75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d42220d2eec38ddec8a40aa4a4fbf75">&#9670;&nbsp;</a></span>train() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool train </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt;&#160;</td>
          <td class="paramname"><em>error_mz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt;&#160;</td>
          <td class="paramname"><em>theo_mz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="a00001.html#a12109">double</a> &gt;&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a08833.html#aee10ef272753332e5050a1c05d131603">MODELTYPE</a>&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_RANSAC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Train a model using calibrant data. </p>
<p>Given theoretical and observed mass values (and corresponding weights), a model (linear, quadratic, ...) is build. Outlier removal is applied before. The 'obs_mz' can be either given as absolute masses in [Th] or relative deviations in [ppm]. The <a class="el" href="a08833.html" title="Create and apply models of a mass recalibration function.">MZTrafoModel</a> must be constructed accordingly (see constructor). This has no influence on the model building itself, but rather on how '<a class="el" href="a08833.html#a616bc5072078e61872b9408f56cdd124" title="Apply the model to an uncalibrated m/z value.">predict()</a>' works internally.</p>
<p>Outlier detection before model building via the RANSAC algorithm is supported for LINEAR and QUADRATIC models.</p>
<p>Internally, these steps take place:</p><ul>
<li>[apply RANSAC] (depending on 'use_RANSAC')</li>
<li>build model and store its parameters internally</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error_mz</td><td>Observed Mass error (in ppm or Th) </td></tr>
    <tr><td class="paramname">theo_mz</td><td>Theoretical m/z values, corresponding to 'error_mz' </td></tr>
    <tr><td class="paramname">weights</td><td>For weighted models only: weight of calibrants; ignored otherwise </td></tr>
    <tr><td class="paramname">md</td><td>Type of model (linear, quadratic, ...) </td></tr>
    <tr><td class="paramname">use_RANSAC</td><td>Remove outliers before computing the model? </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if model was build, false otherwise </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab31d039027f757beea3da5845d31255d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31d039027f757beea3da5845d31255d">&#9670;&nbsp;</a></span>coeff_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="a00001.html#a12109">double</a>&gt; coeff_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Model coefficients (for both linear and quadratic models), estimated from the data. </p>

</div>
</div>
<a id="a4c723d05b2c008da9ef33ce5446207da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c723d05b2c008da9ef33ce5446207da">&#9670;&nbsp;</a></span>limit_offset_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html#a12109">double</a> limit_offset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>acceptable boundary for the estimated offset; if estimated offset is larger (absolute) the model does not validate (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>) </p>

</div>
</div>
<a id="a609b582adb1600301f26f0a3c09065da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a609b582adb1600301f26f0a3c09065da">&#9670;&nbsp;</a></span>limit_power_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html#a12109">double</a> limit_power_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>acceptable boundary for the estimated power; if estimated power is larger (absolute) the model does not validate (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>) </p>

</div>
</div>
<a id="a9a110d624f432d2c118323344db9373c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a110d624f432d2c118323344db9373c">&#9670;&nbsp;</a></span>limit_scale_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html#a12109">double</a> limit_scale_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>acceptable boundary for the estimated scale; if estimated scale is larger (absolute) the model does not validate (<a class="el" href="a08833.html#a6a269da0b9cea5776113b60acb9002f9" title="Predicate to decide if the model has valid parameters, i.e. coefficients.">isValidModel()</a>) </p>

</div>
</div>
<a id="a311a641a091784f7c13bb95451cc0b71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311a641a091784f7c13bb95451cc0b71">&#9670;&nbsp;</a></span>names_of_modeltype</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string names_of_modeltype[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>strings corresponding to enum MODELTYPE </p>

</div>
</div>
<a id="ac386b40e1b9eab5982a60ebdfc5e0609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac386b40e1b9eab5982a60ebdfc5e0609">&#9670;&nbsp;</a></span>ransac_params_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a10265.html">Math::RANSACParam</a>* ransac_params_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>global pointer, init to NULL at startup; set class-global RANSAC params </p>

</div>
</div>
<a id="ab64d07aa179cf2b1fac14777c99b41af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab64d07aa179cf2b1fac14777c99b41af">&#9670;&nbsp;</a></span>rt_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html#a12109">double</a> rt_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>retention time associated to the model (i.e. where the calibrant data was taken from) </p>

<p class="reference">Referenced by <a class="el" href="a08837.html#a2399defeae7a8b5d68e34099ce97d1ee">MZTrafoModel::RTLess::operator()()</a>.</p>

</div>
</div>
<a id="a19864090c3024c23d1a8d5d2639457dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19864090c3024c23d1a8d5d2639457dc">&#9670;&nbsp;</a></span>use_ppm_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool use_ppm_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>during training, model is build on absolute or relative(ppm) predictions. <a class="el" href="a08833.html#a616bc5072078e61872b9408f56cdd124" title="Apply the model to an uncalibrated m/z value.">predict()</a>, i.e. applying the model, requires this information too </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:50 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
