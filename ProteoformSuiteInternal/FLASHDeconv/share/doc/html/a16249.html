<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: Building OpenMS on Windows</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Building OpenMS on Windows </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="install_win_read"></a>
Introduction</h1>
<p>This document addresses OpenMS users and explains the installation procedure for building OpenMS from its sources. If you only want to use the OpenMS Proteomics Pipeline (TOPP), you are strongly encouraged to <b>download the windows binary installer</b> (see <a href="http://www.OpenMS.de/download/" target="_blank">here</a>), instead of building OpenMS from sources. For more information read the install instructions for the TOPP binaries.</p>
<p>This document especially considers the installation of several libraries which are required by OpenMS. Most of these libraries are made available in our "contrib-package" (see below). <br  />
 If you encounter errors during configuring/compiling our software, have a look at our "Known Issues" section <a class="el" href="a16236.html">here</a>, maybe the error is already known. If not, please write to the <a href="open-ms-general@lists.sourceforge.net" target="_new">mailing list</a>. <br  />
 <br  />
</p>
<p><b>Notation of this tutorial</b> </p><ul>
<li>
A string in &lt;&gt; is something the user needs to choose e.g. &lt;path_to_contrib&gt; means that this string should be replaced by the path where the user put the OpenMS contrib package. Usually all commands where this is necessary come with examples, so don't worry. </li>
<li>
Whenever you added a path to your Windows PATH Environment variable, every Command Prompt which is already open will not be refreshed. You will need a to open a new one. </li>
</ul>
<h1><a class="anchor" id="install_win_setup"></a>
Setup of environment</h1>
<p><b>Pre-Requisites (Software)</b> </p><ul>
<li>
Have a Visual Studio 2015 or 2017 installed (The C++ Express editions should work as well, we tested VSE2015 Update 3). <br  />
<b>Not supported are MinGW (g++ based compiler) and VS2013 (and earlier, due to missing C11 support). Do not use a MinGW-enabled shell since CMake will get confused! Please use the Command Prompt of the Visual Studio version you want to build with.</b> Other compilers which are close to the VS toolchain might work, but are not tested. </li>
<li>
Have at least CMake 3.1 or greater installed (see <a href="http://www.cmake.org">http://www.cmake.org</a>). For building with our contrib package please use 3.14+. <br  />
 CMake's Generator (-G flag) also must support your version of Visual Studio. If it doesn't, please upgrade CMake.<br  />
 </li>
<li>
To extract archives within submodules of the contrib you will need <code>7-Zip</code> (see <a href="http://www.7-zip.org/">http://www.7-zip.org/</a>) <br  />
7z.exe is searched in "C:/Program Files/7-Zip/" and "C:/Programme/7-Zip/". Make sure it is in either of these locations or add the installation directory to your PATH. </li>
</ul>
<h1><a class="anchor" id="install_win_required"></a>
Installing required dependency libraries</h1>
<p>OpenMS depends on several other libraries. On a windows system, these are usually not present.</p>
<h2><a class="anchor" id="install_win_contrib"></a>
Contrib installation</h2>
<p>In order to make the installation of the remaining required libraries easier, we composed a "contrib-package" containing the libraries Boost, Eigen, sqlite3, CoinMP, WildMagic, libSVM, libHDF5, SeqAn, glpk, zlib, libbz2 and Xerces-C. This contrib package has several advantages over manual installation </p><ul>
<li>
You get all the libraries in versions tested with OpenMS. </li>
<li>
It contains a batch script that builds all the libraries in one step. </li>
<li>
You don't have to spend hours reading installation instructions of all the libraries. </li>
<li>
We applied some patches to the libraries to fix some bugs. <br  />
<b>These bugs may be fatal if you do not use the contrib package.</b> </li>
</ul>
<p><b>Download:</b> </p>
<p>If you plan to use the development version of OpenMS, clone OpenMS and checkout the optional contrib submodule with </p><div class="fragment"><div class="line">git clone https:<span class="comment">//github.com/OpenMS/OpenMS</span></div>
<div class="line">git submodule update --init contrib</div>
</div><!-- fragment --><p> to obtain the latest potentially unstable version. If you want to use a release version of OpenMS, use the corresponding Release-tagged version on GitHub (<a href="https://github.com/OpenMS/contrib/releases">https://github.com/OpenMS/contrib/releases</a>) or download the contrib source from a .tar.gz for older releases.</p>
<p><b>Installation:</b> </p>
<p>After you got the source code for the contrib package follow these steps:</p>
<ol>
<li>
Open a <b>VisualStudio Developer Command prompt</b> (by default you will get a 32-bit environment which you most likely do not want; use a x64 environment if you want 64 bit apps!)<br  />
 <dl class="section note"><dt>Note</dt><dd>VS2015 does not provide a commandline shortcut for a 64bit command prompt. Call <code>"C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" amd64</code> to get one! </dd>
<dd>
VS2017 has a (well hidden) batch-file which correctly configures your environment for 64bit builds. It should be located at <code>"C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvars64.bat"</code> </dd></dl>
</li>
<li>
Create a build directory for the OpenMS contrib<br  />
 e.g. <code>mkdir contrib_win64_build</code> </li>
<li>
<p class="startli">Call CMake to build the contrib<br  />
 Be aware that you can build 64bit apps even if your operating system is only 32bit (cross-compiling), but you will not be able to run 64bit apps in this case.</p>
<div class="fragment"><div class="line">cd &lt;path_to_contrib_build&gt;</div>
<div class="line">cmake -DBUILD_TYPE=ALL -DNUMBER_OF_JOBS=4 -G <span class="stringliteral">&quot;&lt;generator&gt;&quot;</span> <span class="stringliteral">&quot;&lt;path_to_contrib&gt;&quot;</span></div>
</div><!-- fragment --><p class="interli">The <code>&lt;generator&gt;</code> you use must be one of the Visual Studio Generators. This is because some contrib libs require Visual Studio to build. Be careful to specify the Generator suffixed with "Win64" if you want a 64bit contrib! Type <code>cmake</code> to see a list of available generators.<br  />
</p>
<p class="interli">Example: </p><div class="fragment"><div class="line">cd <a class="code" href="a05830.html#a8fc6defe4e499b1b9b9c275689e44352">c</a>:\dev\contrib_win64_build</div>
<div class="line">cmake -DBUILD_TYPE=ALL -DNUMBER_OF_JOBS=4 -G <span class="stringliteral">&quot;Visual Studio 15 2017 Win64&quot;</span> <span class="stringliteral">&quot;c:\dev\OpenMS\contrib&quot;</span></div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
Add the &lt;path_to_contrib_build&gt;/lib directory to your PATH Environment Variable (this is so Windows can find the DLL's when running our executables). </li>
</ol>
<h2><a class="anchor" id="install_qt"></a>
QT installation</h2>
<p>Qt comes in two flavors: commercial or non-commercial - choose whatever is applicable to you: read more on the Qt website For several recent QT5 versions, there are binary development versions available for the most recent compilers. Go to <a href="https://www.qt.io/download">https://www.qt.io/download</a> and click on "Go open source" at the end of the right column to download the installer. Follow steps, download, save and run the installer. Create a Qt account. Choose a folder like "c:\dev\QT". From the components choose a matching version, e.g. QT 5.10.0 and the MSVC component that fits your Visual Studio version and architecture (most likely only 64bit is supported anymore). You can deselect QTCreator under Tools. Accept the license, choose startmenu entries if wanted and install. Resulting files appear under "c:\dev\QT\$VERSION".</p>
<p>To build Qt from sources, download Qt5 from their git repository ad follow the steps below:</p>
<p>Follow this procedure if you want to compile Qt yourself: </p><ol>
<li>
non-commercial: <ol>
<li>
install perl (e.g. Strawberry Perl), Python and git </li>
<li>
download <b>Qt5 source</b> via git or as a source package from the website: <div class="fragment"><div class="line">git clone git:<span class="comment">//github.com/qt/qt5 --branch 5.9 qt-5.9</span></div>
</div><!-- fragment --> </li>
<li>
activate the needed modules via: <div class="fragment"><div class="line">perl init-repository --module-subset=<span class="stringliteral">&quot;essential,qtsvg&quot;</span> --branch</div>
</div><!-- fragment --> </li>
<li>
open a Visual Studio Command Line (use x64 version if you want 64bit apps!) </li>
<li>
<div class="fragment"><div class="line">cd qt-5.9</div>
</div><!-- fragment --> </li>
<li>
if you have multiple versions of VS installed you might need to provide the <code>-platform</code> param for the next configure command (e.g., <code>-platform win32-msvc2012</code>) </li>
<li>
To save disk space, we use the -prefix switch do install only the required parts of Qt to a new directory of your choice (called <code>&lt;path-to-qt&gt;</code>, e.g. <code>c:/dev/Qt/5.9/</code>). Check more options and supported compilers here: <a href="http://doc.qt.io/qt-5/configure-options.html">http://doc.qt.io/qt-5/configure-options.html</a> (especially for developers). Note that part of Qt requires Python to compile, so its a good idea to add the Python executable to your path <div class="fragment"><div class="line">PATH=%PATH%;C:\Python27\</div>
<div class="line">configure -opensource -skip speech -skip location -nomake tests -nomake examples -confirm-license -opengl dynamic -prefix &lt;path-to-qt&gt; -platform win32-msvc </div>
</div><!-- fragment --> </li>
<li>
<div class="fragment"><div class="line">nmake</div>
</div><!-- fragment --> </li>
<li>
<div class="fragment"><div class="line">nmake install</div>
</div><!-- fragment --> </li>
<li>
all Qt files (libs, includes etc) are now in <code>&lt;path-to-qt&gt;</code> and sub-directories. </li>
<li>
alternatively to nmake, you can download JOM (<a href="http://qt-project.org/wiki/jom">http://qt-project.org/wiki/jom</a>) and type "jom" in your Qt build directory to use multiple cores (builds a lot faster usually) </li>
</ol>
</li>
<li>
commercial: <ol>
<li>
we have no experience here, but it should be possible to get the DLL's and Link-Libraries here as well. </li>
</ol>
</li>
<li>
add the <code>&lt;path-to-qt&gt;/bin</code> (!) directory to your PATH Environment Variable, so the dlls are found during runtime. </li>
<li>
set the environment variable QT_QPA_PLATFORM_PLUGIN_PATH to <code>&lt;path-to-qt&gt;/plugins/platforms</code>, otherwise you might get an error "This application failed to start because it could not find or load the Qt platform plugin "windows". Alternatively, you can copy the entire platforms-folder into the folder where your openms executables will be created (but they will depend on the build-type, i.e. release|debug|...). </li>
</ol>
<h1><a class="anchor" id="create_doc"></a>
Building the documentation (optional)</h1>
<p>This section is optional. If you can live with the online documentation, you do not need to build your own.</p>
<p>In order to build the class documentation (<code>doc</code> &amp; <code>doc_internal</code> targets), TOPP tutorials (<code>doc_tutorials</code> target) and more, you will need to install three programs:</p>
<ol>
<li>
Doxygen (1.8.16 is tested, others might work as well; older versions might produce errors or incomplete documentation due to lack of support for certain commands or bugs) <ul>
<li>
Download the installer for Windows (<a href="http://www.doxygen.org">http://www.doxygen.org</a>) </li>
<li>
Execute the installer. It should automatically add doxygen.exe to the Windows PATH Environment (please recheck) </li>
</ul>
</li>
<li>
MikTeX (version 2.7 and 2.9 are tested, others might work as well, texlive is an option, too) - basic version (for DVIPS, LATEX etc). <ul>
<li>
Download binaries for Windows (<a href="http://miktex.org/">http://miktex.org/</a>) </li>
<li>
During installation tick "install missing packages on the fly = yes" </li>
<li>
The installer SHOULD add the bin directory of MikTeX automatically to the Windows PATH Environment (please recheck) </li>
</ul>
</li>
<li>
GPL Ghostscript (e.g. 8.60, 9.19) for Windows <ul>
<li>
Download binaries for Windows (<a href="http://www.ghostscript.com/">http://www.ghostscript.com/</a>) and install </li>
<li>
Add the <em>&lt;path_to_GHOSTSCRIPT&gt;/bin</em> directory (e.g. c:/programs/gs/gs8.60/bin) to the Windows PATH Environment </li>
</ul>
</li>
<li>
Optional:<br  />
 You can create dependency graphs using a doxygen plug-in called <code>dot</code>. <ul>
<li>
Download binaries for windows from <a href="http://www.graphviz.org">http://www.graphviz.org</a> (we tested: graphviz-2.18.exe) </li>
<li>
The installer should have added dot.exe to the Windows PATH Environment (please recheck) </li>
</ul>
</li>
</ol>
<p>You should install the above apps prior to installing OpenMS (see below), because otherwise during the configuration step the documentation targets will be disabled. If you already have a working installation of OpenMS (without documentation), you can simply install the above programs and reconfigure OpenMS by calling <code>cmake .</code> in your build tree. No need to recompile the library!</p>
<h1><a class="anchor" id="install_win_openms"></a>
Installing OpenMS</h1>
<p>For development and cutting edge functionalities we recommend using the Git version from GitHub </p><div class="fragment"><div class="line">git clone https:<span class="comment">//github.com/OpenMS/OpenMS</span></div>
</div><!-- fragment --><p> Certain stable releases can found on the GitHub release page <a href="https://github.com/OpenMS/OpenMS/releases">https://github.com/OpenMS/OpenMS/releases</a>.</p>
<p>If you have not installed the libraries which OpenMS requires, please refer to the section <a class="el" href="a16249.html#install_win_contrib">Contrib installation</a> above (and skip the clone step). <br  />
</p>
<p>Now, we create the build system: </p><ol>
<li>
Open a Visual Studio Command Line (use x64 version if you want 64bit apps!) </li>
<li>
Create a build directory for OpenMS, e.g. <code>mkdir OpenMS_Win64</code> <dl class="section note"><dt>Note</dt><dd>Due to Windows restrictions concerning the maximum length of a file path (of 260 characters) and the rather deep folder hierarchies created by CMake and Visual Studio, we advise to restrict the length of the base path to your build directory. We suggest less than 40 characters if possible. </dd></dl>
</li>
<li>
<p class="startli">Call CMake to create the build system </p><div class="fragment"><div class="line">cd &lt;path_to_OpenMS_build&gt;</div>
<div class="line">cmake -D OPENMS_CONTRIB_LIBS=<span class="stringliteral">&quot;&lt;path_to_contrib_build&gt;&quot;</span> -D CMAKE_PREFIX_PATH=&lt;path_to_QT5_prefix&gt; -G <span class="stringliteral">&quot;&lt;generator&gt;&quot;</span> -T host=x64 <span class="stringliteral">&quot;&lt;path_to_OpenMS&gt;&quot;</span></div>
</div><!-- fragment --><p class="endli">The CMAKE_PREFIX_PATH should hold the path to your Qt5 build directory (see example below). Note that it is NOT the main Qt5 directory, but the subfolder which is named after the toolchain it was build with (e.g. "5.6/msvc2015_64"). The choice of <code>&lt;generator&gt;</code> depends on your system. Type <code>cmake</code> to see a list of available generators. </p><dl class="section note"><dt>Note</dt><dd>We strongly recommend the Visual Studio Generator and it should be identical to the one used for building the contrib. Other generators (such as nmake) are not supported! If you need compiling on the command line, you can use <code>MSBuild</code> also on VS solution files! The <code>-T host=x64</code> flag instructs Visual Studio to use a 64bit compiler and linker toolchain to avoid linker errors (<code>LNK1210: exceeded internal ILK size limit; link with /INCREMNTAL:NO</code>) during development (if the flag is omitted the 32bit toolchain is used to generate 64bit binaries). Example: <div class="fragment"><div class="line">cd <a class="code" href="a05830.html#a8fc6defe4e499b1b9b9c275689e44352">c</a>:\dev\OpenMS_Win64</div>
<div class="line">cmake -D OPENMS_CONTRIB_LIBS=<span class="stringliteral">&quot;C:\dev\contrib_win64_build&quot;</span> -D CMAKE_PREFIX_PATH=<a class="code" href="a05830.html#a8fc6defe4e499b1b9b9c275689e44352">c</a>:\dev\Qt5.6.2\5.6\msvc2015_64\ -G <span class="stringliteral">&quot;Visual Studio 15 2017 Win64&quot;</span> -T host=x64 ..\OpenMS</div>
</div><!-- fragment --> </dd></dl>
</li>
</ol>
<p>You can set more CMake variables adding <code>-DVARIABLE=VALUE</code> options when calling CMake.The most important CMake variables are:<table style="border-style:solid; border-collapse:collapse; border-color:#c0c0c0;">
<tr>
<td valign="top"><code>OPENMS_CONTRIB_LIBS</code>  </td><td>Separate search path for the contrib libraries from github.com/OpenMS/contrib that is internally considered before CMAKE_PREFIX_PATH for searching, linking and adding include directories.  </td></tr>
<tr>
<td valign="top"><code>CMAKE_PREFIX_PATH</code>  </td><td><p class="starttd">Additional search path for the contrib libraries.</p>
<p class="intertd">[MacOSX only] If you want to use libraries installed via Homebrew or MacPorts you might need to provide the corresponding paths</p>
<p class="intertd"><code>-DCMAKE_PREFIX_PATH=/usr/local/Cellar</code> for Homebrew <code>-DCMAKE_PREFIX_PATH=/opt/local</code> for MacPorts</p>
<p class="endtd">Please keep in mind that both Homebrew and MacPorts do not provide all libraries so you also need to specify the path to your self-build contrib via -DOPENMS_CONTRIB_LIBS   </p>
</td></tr>
<tr>
<td valign="top"><code>Qt5_DIR</code>  </td><td>Additional search path for the Qt5 CMake files. Use <code>/PATH/TO/QT_INSTALLATION/lib/cmake/Qt5</code> as value. &lt;\tr&gt; </td></tr>
<tr>
<td valign="top"><code>HAS_XSERVER=On/Off</code>  </td><td>[Linux/MacOS only] Defines if a running X Server is available when building OpenMS. As building parts of the documentation and running certain tests requires a running X Server, this flag can be used to disable those parts of the documentation and the tests that need an X Server. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ADDRESS_SANITIZER=On/Off</code>  </td><td>[g++/clang only] Enables/Disables Address Sanitizer (ASAN) to find access violations and other bugs.  </td></tr>
<tr>
<td valign="top"><code>WITH_GUI=On/Off</code>  </td><td>Defines if the OpenMS GUI tools (TOPPView, TOPPAS) should be built or not. If you plan to use OpenMS without a GUI, set this flag to "Off" (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ENABLE_TUTORIALS=On/Off</code>  </td><td>Enables targets to build and install the pdf tutorials (needs LaTeX). (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ENABLE_DOCS=On/Off</code>  </td><td>Enables documentation targets, allowing to build the OpenMS documentation. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>GIT_TRACKING=On/Off</code>  </td><td>Embed Git checksum into the library. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>ENABLE_UPDATE_CHECK=On/Off</code>  </td><td>Check online for <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> Updates upon invocation of any TOPP/UTIL. (Default: On)  </td></tr>
<tr>
<td valign="top"><code>CMAKE_BUILD_TYPE</code>  </td><td>[makefiles only; does not apply for XCode or VS] Should be either 'Release' (optimization enabled) or 'Debug' (debug info and precondition/postcondition checks enabled). <br  />
 The default is 'Release'.  </td></tr>
<tr>
<td valign="top"><code>CMAKE_CXX_COMPILER</code>  </td><td>Defines the C++ compiler to use.  </td></tr>
<tr>
<td valign="top"><code>MY_CXX_FLAGS</code>  </td><td>Additional custom C++ compile options you would like to add (must fit your chosen compiler). This might be useful, for example, for adding debug symbols to a Release build, or for performance analysis (e.g. for '... -DMY_CXX_FLAGS="-g;-fno-omit-frame-pointer" ...')  </td></tr>
<tr>
<td valign="top"><code>CMAKE_C_COMPILER</code>  </td><td>Defines the C compiler to use. This should match the C++ compiler. Mixing compilers (e.g., <em>clang++</em> for C++ and <em>gcc</em> for C) can lead to undefined behaviour as some internal settings (e.g., OpenMP support) are determined using the C compiler and are assumed to be the same for the C++ compiler.  </td></tr>
<tr>
<td valign="top"><code>SEARCH_ENGINES_DIRECTORY</code> (optional) </td><td>The location where thirdparty search engines (X!Tandem, OMSSA, MyriMatch, MSGF+, Fido) are located. This directory should have the same structure as the example in the search engine repository at <a href="https://github.com/OpenMS/THIRDPARTY">https://github.com/OpenMS/THIRDPARTY</a> after flattening for your platform. /. This directory is only needed to include thirdparty tools in the installer for OpenMS.  </td></tr>
<tr>
<td valign="top"><code>PYOPENMS</code>  </td><td>Use ON to enable the target for Python bindings, see also <a class="el" href="a16238.html">pyOpenMS (Python bindings)</a>.  </td></tr>
<tr>
<td valign="top"><code>CMAKE_INSTALL_PREFIX</code>  </td><td><p class="starttd">the path where the bin/ and lib/ directories should be installed to (when </p><pre>sudo make install</pre><p> is wished for a system-wide install: e.g. -DCMAKE_INSTALL_PREFIX=/usr/local/) <br  />
 <b>Note:</b> Moving these directories after installing is not supported.</p>
<p class="endtd"><b>For development, install prefixes are not supported. In this case OpenMS must be built in place!</b>   </p>
</td></tr>
</table>
</p>
<p>Now there should be a <code>OpenMS_host.sln</code> file in your build directory, which you can open using Visual Studio. If you want to work on only a subset of OpenMS (e.g., OpenMS_GUI) you can open the specific solution that you will find in the src/ folder of your build folder and below (e.g., src/openms_gui/OpenMS_GUI.sln).</p>
<p>In Visual Studio execute the 'targets' project, which will show you the most prominent targets.</p>
<p>Try to build the OpenMS library - the target is called 'OpenMS'. This will create the OpenMS.dll library. If you used the debug configuration it will be called OpenMSd.dll, in release mode its called OpenMS.dll.<br  />
 As a last step you should add the location of the OpenMS.dll to your PATH environment. This makes calling TOPPView and TOPP tools more convenient if you are working the command line. Also, external projects (see <a class="el" href="a16234.html">External Code using OpenMS</a>) require the OpenMS dll (OpenMS.dll or OpenMSd.dll) to be in the PATH. Depending on the generator and configuration used you will find the dll in [OpenMS_build]/bin/Release or [OpenMS_build]/bin/Debug (for VS) or just [OpenMS_build]/bin (nmake). In the same folder the TOPP tools will reside once build (see next section). Be aware that the order of directories in the PATH variable determines which dll or executable is used, if no absolute path was given when the executable was called. So the PATH might need to be updated (add/delete/reorder entries) if you are working with multiple installations or configurations of OpenMS.</p>
<h1><a class="anchor" id="install_win_topp"></a>
Building the TOPP tools</h1>
<p>TOPP is a toolset for the analysis of HPLC-MS data. It consists of several small applications that can be chained to create analysis pipelines tailored for a specific problem. <br  />
 <br  />
 After you have built OpenMS, you can build the TOPP tools by building the "TOPP" project in the IDE. <br  />
</p>
<h1><a class="anchor" id="install_win_testing_openms"></a>
Testing your OpenMS/TOPP installation</h1>
<p>Each class in OpenMS and each TOPP tool has a unit test. The tests will be build with the complete solution. To specifically build and execute the tests, go to your OpenMS build_tree and further into ./src/tests/class_tests. There you'll find an OpenMS_class_tests.sln file, which you can open. For other generators an equivalent file with another suffix will be present. Now, build the 'ALL_BUILD' target and the 'RUN_TESTS' target. You can also run the tests in a command prompt in &lt;OpenMS_build_tree&gt; using <code>ctest</code>. Single tests can be run with <code>ctest -R &lt;testnameregex&gt;</code>, e.g. <code>ctest -R Base64_test</code>. For more syntax on CTest look at the online documentation at <a href="http://cmake.org/">http://cmake.org/</a>.</p>
<h1><a class="anchor" id="install_win_cmdline_openms"></a>
Building OpenMS on the commandline</h1>
<p>The Visual Studio solution files can contain many targets, which makes the IDE a bit sluggish especially when starting up the first time. The OpenMS class tests are by far the largest.</p>
<p>If you just want to compile the library or executables, it's usually faster to use the commandline. Visual Studio solution files can be used here as well, as arguments to <code>MSBuild.exe</code>, e.g. </p><div class="fragment"><div class="line">MSBuild.exe &lt;solution.sln&gt; /maxcpucount /target:&lt;target&gt; /p:Configuration=&lt;Config&gt;</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Since the call can be a bit lengthy, there is a batch file in <code>OpenMS/tools/build.bat</code> and in the root of your build tree (copied there by cmake for convenience), which allows to build the most important targets (TOPP, UTILS, Gui, Tests, Doc) in Release or Debug using very short notation. Call it without arguments to see its usage help text. For example to build only the <a class="el" href="a05822.html" title="Main OpenMS namespace.">OpenMS</a> library in release mode, call</dd></dl>
<div class="fragment"><div class="line">build <a class="code" href="a05822.html">OpenMS</a> r</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aa05830_html_a8fc6defe4e499b1b9b9c275689e44352"><div class="ttname"><a href="a05830.html#a8fc6defe4e499b1b9b9c275689e44352">OpenMS::Constants::c</a></div><div class="ttdeci">const double c</div></div>
<div class="ttc" id="aa05822_html"><div class="ttname"><a href="a05822.html">OpenMS</a></div><div class="ttdoc">Main OpenMS namespace.</div><div class="ttdef"><b>Definition:</b> FeatureDeconvolution.h:46</div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:27 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
