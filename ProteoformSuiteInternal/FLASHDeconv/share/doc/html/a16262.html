<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenMS: ConsensusID</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_ini.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenMS_75x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenMS
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a16239.html">User Quickstart Guide</a></li><li class="navelem"><a class="el" href="a16240.html">TOPP documentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ConsensusID </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Computes a consensus from results of multiple peptide identification engines.</p>
<center> <table class="doxtable">
<tr>
<td align="center" bgcolor="#EBEBEB">potential predecessor tools  </td><td valign="middle" rowspan="4"><img class="formulaInl" alt="$ \longrightarrow $" src="form_34.png"/> ConsensusID <img class="formulaInl" alt="$ \longrightarrow $" src="form_34.png"/> </td><td align="center" bgcolor="#EBEBEB">potential successor tools   </td></tr>
<tr>
<td valign="middle" align="center" rowspan="1"><a class="el" href="a16295.html">IDPosteriorErrorProbability</a>  </td><td valign="middle" align="center" rowspan="3"><a class="el" href="a16330.html">PeptideIndexer</a>   </td></tr>
<tr>
<td valign="middle" align="center" rowspan="1"><a class="el" href="a16292.html">IDFilter</a>   </td></tr>
<tr>
<td valign="middle" align="center" rowspan="1"><a class="el" href="a16293.html">IDMapper</a>   </td></tr>
</table>
</center><p><b>Reference:</b></p>
<p>Nahnsen <em>et al.</em>: <a href="https://doi.org/10.1021/pr2002879">Probabilistic consensus scoring improves tandem mass spectrometry peptide identification</a> (J. Proteome Res., 2011, PMID: 21644507).</p>
<p><b>Algorithms:</b></p>
<p>ConsensusID offers several algorithms that can aggregate results from multiple peptide identification engines ("search engines") into consensus identifications - typically one per MS2 spectrum. This works especially well for search engines that provide more than one peptide hit per spectrum, i.e. that report not just the best hit, but also a list of runner-up candidates with corresponding scores.</p>
<p>The available algorithms are (see also <a class="el" href="a06693.html">OpenMS::ConsensusIDAlgorithm</a> and its subclasses): </p><ul>
<li><code>PEPMatrix:</code> Scoring based on posterior error probabilities (PEPs) and peptide sequence similarities. This algorithm uses a substitution matrix to score the similarity of sequences not listed by all search engines. It requires PEPs as the scores for all peptide hits. </li>
<li><code>PEPIons:</code> Scoring based on posterior error probabilities (PEPs) and fragment ion similarities ("shared peak count"). This algorithm, too, requires PEPs as scores. </li>
<li><code>best:</code> For each peptide ID, this uses the best score of any search engine as the consensus score. All peptide IDs must have the same score type. </li>
<li><code>worst:</code> For each peptide ID, this uses the worst score of any search engine as the consensus score. All peptide IDs must have the same score type. </li>
<li><code>average:</code> For each peptide ID, this uses the average score of all search engines as the consensus score. Again, all peptide IDs must have the same score type. </li>
<li><code>ranks:</code> Calculates a consensus score based on the ranks of peptide IDs in the results of different search engines. The final score is in the range (0, 1], with 1 being the best score. The input peptide IDs do not need to have the same score type.</li>
</ul>
<p>PEPs for search results can be calculated using the <a class="el" href="a16295.html">IDPosteriorErrorProbability</a> tool, which supports a variety of search engines.</p>
<dl class="section note"><dt>Note</dt><dd>Important: All protein-level identification results will be lost by applying ConsensusID. (It is unclear how potentially conflicting protein-level results from different search engines should be combined.) If necessary, run the <a class="el" href="a16330.html">PeptideIndexer</a> tool to add protein references for peptides again.</dd>
<dd>
Peptides with different post-translational modifications (PTMs), or with different site localizations of the same PTMs, are treated as different peptides by all algorithms. However, a qualification applies for the <code>PEPMatrix</code> algorithm: The similarity scoring method used there can only take unmodified peptide sequences into account, so PTMs are ignored during that step. However, the PTMs are not removed from the peptides, and there will be separate results for differently-modified peptides.</dd></dl>
<p><b>File types:</b></p>
<p>Different input files types are supported: </p><ul>
<li>idXML: A file containing multiple identification runs, typically from different search engines. Use <a class="el" href="a16294.html">IDMerger</a> to merge individual idXML files from different search runs into one. During the ConsensusID analysis, the identification results will be grouped according to their originating MS2 spectra, based on retention time and precursor m/z information (see parameters <code>rt_delta</code> and <code>mz_delta</code>). One consensus identification will be generated for each group. </li>
<li>featureXML or consensusXML: Given (consensus) features annotated with peptide identifications from multiple search runs, one consensus identification is created for every annotated feature. Peptide identifications not assigned to features are not considered and will be removed. See <a class="el" href="a16293.html">IDMapper</a> for the task of mapping peptide identifications to feature maps or consensus maps.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Currently mzIdentML (mzid) is not directly supported as an input/output format of this tool. Convert mzid files to/from idXML using <a class="el" href="a16291.html">IDFileConverter</a> if necessary.</dd></dl>
<p><b>Filtering:</b></p>
<p>Generally, search results can be filtered according to various criteria using <a class="el" href="a16292.html">IDFilter</a> before (or after) applying this tool. ConsensusID itself offers only a limited number of filtering options that are especially useful in its context (see the <code>filter</code> parameter section): </p><ul>
<li><code>considered_hits:</code> Limits the number of alternative peptide hits considered per spectrum/feature for each identification run. This helps to reduce runtime, especially for the <code>PEPMatrix</code> and <code>PEPIons</code> algorithms, which involve costly "all vs. all" comparisons of peptide hits. </li>
<li><code>min_support:</code> This allows filtering of peptide hits based on agreement between search engines. Every peptide sequence in the analysis has been identified by at least one search run. This parameter defines which fraction (between 0 and 1) of the remaining search runs must "support" a peptide identification that should be kept. The meaning of "support" differs slightly between algorithms: For <code>best</code>, <code>worst</code>, <code>average</code> and <code>rank</code>, each search run supports peptides that it has also identified among its top <code>considered_hits</code> candidates. So <code>min_support</code> simply gives the fraction of additional search engines that must have identified a peptide. (For example, if there are three search runs, and only peptides identified by at least two of them should be kept, set <code>min_support</code> to 0.5.) For the similarity-based algorithms <code>PEPMatrix</code> and <code>PEPIons</code>, the "support" for a peptide is the average similarity of the most-similar peptide from each (other) search run. (In the context of the JPR publication, this is the average of the similarity scores used in the consensus score calculation for a peptide.) </li>
<li><code>count_empty:</code> Typically not all search engines will provide results for all searched MS2 spectra. This parameter determines whether search runs that provided no results should be counted in the "support" calculation; by default, they are ignored.</li>
</ul>
<p><b>The command line parameters of this tool are:</b> </p><pre class="fragment">

ConsensusID -- Computes a consensus of peptide identifications of several identification engines.

Full documentation: http://www.openms.de/documentation/TOPP_ConsensusID.html

Version: 2.4.0-HEAD-2019-12-09 Dec  9 2019, 13:47:09, Revision: af8a11e

To cite OpenMS:

  Rost HL, Sachsenberg T, Aiche S, Bielow C et al.. OpenMS: a flexible open-source software platform for mass spectrometry data analysis. Nat Meth. 2016; 13, 9: 741-748. doi:10.1038/nmeth.3959.



Usage:

  ConsensusID &lt;options&gt;



This tool has algorithm parameters that are not shown here! Please check the ini file for a detailed descript

ion or use the --helphelp option.



Options (mandatory options marked with '*'):

  -in &lt;file&gt;*                       Input file (valid formats: 'idXML', 'featureXML', 'consensusXML')

  -out &lt;file&gt;*                      Output file (valid formats: 'idXML', 'featureXML', 'consensusXML')

                                    

  -rt_delta &lt;value&gt;                 [idXML input only] Maximum allowed retention time deviation between ident

                                    ifications belonging to the same spectrum. (default: '0.1' min: '0.0')

  -mz_delta &lt;value&gt;                 [idXML input only] Maximum allowed precursor m/z deviation between identi

                                    fications belonging to the same spectrum. (default: '0.1' min: '0.0')



Options for filtering peptide hits:

  -filter:considered_hits &lt;number&gt;  The number of top hits in each ID run that are considered for consensus 

                                    scoring ('0' for all hits). (default: '0' min: '0')

  -filter:min_support &lt;value&gt;       For each peptide hit from an ID run, the fraction of other ID runs that 

                                    must support that hit (otherwise it is removed). (default: '0.0' min:

                                    '0.0' max: '1.0')

  -filter:count_empty               Count empty ID runs (i.e. those containing no peptide hit for the current

                                    spectrum) when calculating 'min_support'?



  -algorithm &lt;choice&gt;               Algorithm used for consensus scoring.

                                    * PEPMatrix: Scoring based on posterior error probabilities (PEPs) and p

                                    eptide sequence similarities (scored by a substitution matrix). Requires

                                    PEPs as scores.

                                    * PEPIons: Scoring based on posterior error probabilities (PEPs) and fra

                                    gment ion similarities ('shared peak count'). Requires PEPs as scores.

                                    * best: For each peptide ID, use the best score of any search engine as

                                    the consensus score. Requires the same score type in all ID runs.

                                    ...

                                    t', 'average', 'ranks')

                                    

Common TOPP options:

  -ini &lt;file&gt;                       Use the given TOPP INI file

  -threads &lt;n&gt;                      Sets the number of threads allowed to be used by the TOPP tool (default: 

                                    '1')

  -write_ini &lt;file&gt;                 Writes the default configuration file

  --help                            Shows options

  --helphelp                        Shows all options (including advanced)



The following configuration subsections are valid:

 - PEPIons     PEPIons algorithm parameters

 - PEPMatrix   PEPMatrix algorithm parameters



You can write an example INI file using the '-write_ini' option.

Documentation of subsection parameters can be found in the doxygen documentation or the INIFileEditor.

For more information, please consult the online documentation for this tool:

  - http://www.openms.de/documentation/TOPP_ConsensusID.html



</pre><p> <b>INI file documentation of this tool:</b> <div class="ini_global">
<div class="legend">
<b>Legend:</b><br>
 <div class="item item_required">required parameter</div>
 <div class="item item_advanced">advanced parameter</div>
</div>
  <div class="node"><span class="node_name">+ConsensusID</span><span class="node_description">Computes a consensus of peptide identifications of several identification engines.</span></div>
    <div class="item item_advanced"><span class="item_name" style="padding-left:16px;">version</span><span class="item_value">2.4.0-HEAD-2019-12-09</span>
<span class="item_description">Version of the tool that generated this parameters file.</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>    <div class="node"><span class="node_name">++1</span><span class="node_description">Instance '1' section for 'ConsensusID'</span></div>
      <div class="item"><span class="item_name item_required" style="padding-left:24px;">in</span><span class="item_value"></span>
<span class="item_description">input file</span><span class="item_tags">input file</span><span class="item_restrictions">*.idXML,*.featureXML,*.consensusXML</span></div>      <div class="item"><span class="item_name item_required" style="padding-left:24px;">out</span><span class="item_value"></span>
<span class="item_description">output file</span><span class="item_tags">output file</span><span class="item_restrictions">*.idXML,*.featureXML,*.consensusXML</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">rt_delta</span><span class="item_value">0.1</span>
<span class="item_description">[idXML input only] Maximum allowed retention time deviation between identifications belonging to the same spectrum.</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">mz_delta</span><span class="item_value">0.1</span>
<span class="item_description">[idXML input only] Maximum allowed precursor m/z deviation between identifications belonging to the same spectrum.</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">algorithm</span><span class="item_value">PEPMatrix</span>
<span class="item_description">Algorithm used for consensus scoring.<br>* PEPMatrix: Scoring based on posterior error probabilities (PEPs) and peptide sequence similarities (scored by a substitution matrix). Requires PEPs as scores.<br>* PEPIons: Scoring based on posterior error probabilities (PEPs) and fragment ion similarities ('shared peak count'). Requires PEPs as scores.<br>* best: For each peptide ID, use the best score of any search engine as the consensus score. Requires the same score type in all ID runs.<br>* worst: For each peptide ID, use the worst score of any search engine as the consensus score. Requires the same score type in all ID runs.<br>* average:  For each peptide ID, use the average score of all search engines as the consensus. Requires the same score type in all ID runs.<br>* ranks: Calculates a consensus score based on the ranks of peptide IDs in the results of different search engines. The final score is in the range (0, 1], with 1 being the best score. No requirements about score types.</span><span class="item_tags"></span><span class="item_restrictions">PEPMatrix,PEPIons,best,worst,average,ranks</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">log</span><span class="item_value"></span>
<span class="item_description">Name of log file (created only when specified)</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">debug</span><span class="item_value">0</span>
<span class="item_description">Sets the debug level</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item"><span class="item_name" style="padding-left:24px;">threads</span><span class="item_value">1</span>
<span class="item_description">Sets the number of threads allowed to be used by the TOPP tool</span><span class="item_tags"></span><span class="item_restrictions"> </span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">no_progress</span><span class="item_value">false</span>
<span class="item_description">Disables progress logging to command line</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">force</span><span class="item_value">false</span>
<span class="item_description">Overwrite tool specific checks.</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="item item_advanced"><span class="item_name" style="padding-left:24px;">test</span><span class="item_value">false</span>
<span class="item_description">Enables the test mode (needed for internal use only)</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="node"><span class="node_name">+++filter</span><span class="node_description">Options for filtering peptide hits</span></div>
        <div class="item"><span class="item_name" style="padding-left:32px;">considered_hits</span><span class="item_value">0</span>
<span class="item_description">The number of top hits in each ID run that are considered for consensus scoring ('0' for all hits).</span><span class="item_tags"></span><span class="item_restrictions">0:&#8734;</span></div>        <div class="item"><span class="item_name" style="padding-left:32px;">min_support</span><span class="item_value">0.0</span>
<span class="item_description">For each peptide hit from an ID run, the fraction of other ID runs that must support that hit (otherwise it is removed).</span><span class="item_tags"></span><span class="item_restrictions">0.0:1.0</span></div>        <div class="item"><span class="item_name" style="padding-left:32px;">count_empty</span><span class="item_value">false</span>
<span class="item_description">Count empty ID runs (i.e. those containing no peptide hit for the current spectrum) when calculating 'min_support'?</span><span class="item_tags"></span><span class="item_restrictions">true,false</span></div>      <div class="node"><span class="node_name">+++PEPIons</span><span class="node_description">PEPIons algorithm parameters</span></div>
        <div class="item"><span class="item_name" style="padding-left:32px;">mass_tolerance</span><span class="item_value">0.5</span>
<span class="item_description">Maximum difference between fragment masses (in Da) for fragments to be considered 'shared' between peptides .</span><span class="item_tags"></span><span class="item_restrictions">0.0:&#8734;</span></div>        <div class="item"><span class="item_name" style="padding-left:32px;">min_shared</span><span class="item_value">2</span>
<span class="item_description">The minimal number of 'shared' fragments (between two suggested peptides) that is necessary to evaluate the similarity based on shared peak count (SPC).</span><span class="item_tags"></span><span class="item_restrictions">1:&#8734;</span></div>      <div class="node"><span class="node_name">+++PEPMatrix</span><span class="node_description">PEPMatrix algorithm parameters</span></div>
        <div class="item"><span class="item_name" style="padding-left:32px;">matrix</span><span class="item_value">identity</span>
<span class="item_description">Substitution matrix to use for alignment-based similarity scoring</span><span class="item_tags"></span><span class="item_restrictions">identity,PAM30MS</span></div>        <div class="item"><span class="item_name" style="padding-left:32px;">penalty</span><span class="item_value">5</span>
<span class="item_description">Alignment gap penalty (the same value is used for gap opening and extension)</span><span class="item_tags"></span><span class="item_restrictions">1:&#8734;</span></div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 9 2019 15:06:28 for OpenMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
